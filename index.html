<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuralOS | Anish's Portfolio</title>

    <!-- Dynamic Favicon (Brain Circuit) -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ§ </text></svg>">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">

    <style>
        :root {
            --bg-color: #0f0f12;
            --window-bg: rgba(18, 20, 26, 0.65);
            --window-header: rgba(18, 20, 26, 0.85);
            --taskbar-bg: rgba(10, 10, 12, 0.7);
            --text-color: #e0e0e0;
            --text-muted: #a0a0a0;

            --accent-color: #1793d1;
            --accent-green: #2ecc71;
            --accent-red: #e74c3c;
            --accent-yellow: #f1c40f;

            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
            --glass-shadow: 0 15px 50px rgba(0, 0, 0, 0.6);

            --discord-bg: #1e1e2e;
            --vscode-bg: rgba(30, 30, 46, 0.9);
            --vscode-sidebar: rgba(20, 20, 28, 0.95);
            --chat-bg: #0b0b0f;
        }

        body {
            cursor: none;
        }

        iframe {
            cursor: auto;
        }

        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            transform: translate(-50%, -50%);
            border-radius: 50%;
            z-index: 2147483647;
            pointer-events: none;
            will-change: transform;
            width: 8px;
            height: 8px;
            background-color: var(--accent-color);
            box-shadow: 0 0 15px var(--accent-color), 0 0 30px var(--accent-color);
            transition: transform 0.1s, opacity 0.2s;
        }

        body.clicking #cursor-dot {
            transform: translate(-50%, -50%) scale(0.5);
        }

        body.cursor-hidden #cursor-dot {
            opacity: 0;
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Inter', sans-serif;
            background: url('https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=2574&auto=format&fit=crop') no-repeat center center fixed;
            background-size: cover;
            color: var(--text-color);
            height: 100vh;
            user-select: none;
        }

        body::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%);
            background-size: 100% 4px;
            z-index: 9000;
            pointer-events: none;
            opacity: 0.3;
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.7' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.04'/%3E%3C/svg%3E");
            pointer-events: none;
            z-index: 0;
        }

        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        #boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #050508;
            color: #fff;
            font-family: 'JetBrains Mono', monospace;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .crt-turn-on {
            animation: turnOn 0.4s linear forwards;
        }

        @keyframes turnOn {
            0% {
                transform: scale(1, 0.005);
                filter: brightness(30);
                opacity: 0;
            }

            40% {
                transform: scale(1, 0.005);
                filter: brightness(30);
                opacity: 1;
            }

            70% {
                transform: scale(1, 1);
                filter: brightness(1);
                opacity: 1;
            }

            100% {
                transform: scale(1, 1);
                filter: brightness(1);
                opacity: 1;
            }
        }

        .boot-content {
            width: 100%;
            max-width: 700px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            opacity: 0;
        }

        #boot-log-fast {
            height: 400px;
            overflow: hidden;
            font-size: 11px;
            color: #888;
            line-height: 1.4;
            white-space: pre-wrap;
            margin-bottom: 20px;
            font-family: 'JetBrains Mono', monospace;
            text-shadow: 0 0 5px rgba(0, 255, 0, 0.4);
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .log-line-fast {
            color: #aaa;
            margin-bottom: 2px;
        }

        .log-highlight {
            color: #fff;
            font-weight: bold;
        }

        .log-success-fast {
            color: #2ecc71;
        }

        .log-warn-fast {
            color: #f1c40f;
        }

        #boot-main-ui {
            display: none;
            flex-direction: column;
            align-items: center;
            animation: fadeIn 0.5s forwards;
        }

        #boot-logo {
            font-size: 80px;
            color: var(--accent-color);
            position: relative;
            margin-bottom: 20px;
        }

        .glitch-effect {
            animation: glitch 2s infinite linear alternate-reverse;
        }

        @keyframes glitch {
            0% {
                transform: translate(0);
                text-shadow: 0 0 0 var(--accent-color);
            }

            20% {
                transform: translate(-2px, 2px);
                text-shadow: 2px 2px var(--accent-red);
            }

            40% {
                transform: translate(-2px, -2px);
                text-shadow: 2px 2px var(--accent-red);
            }

            60% {
                transform: translate(2px, 2px);
                text-shadow: -2px -2px var(--accent-green);
            }

            80% {
                transform: translate(2px, -2px);
                text-shadow: -2px -2px var(--accent-green);
            }

            100% {
                transform: translate(0);
                text-shadow: 0 0 0 var(--accent-color);
            }
        }

        .boot-title {
            font-size: 24px;
            font-weight: 800;
            letter-spacing: 8px;
            text-transform: uppercase;
            color: #fff;
            margin-bottom: 40px;
            text-align: center;
        }

        .progress-container {
            width: 300px;
            height: 4px;
            background: #222;
            border-radius: 2px;
            position: relative;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent-color);
            box-shadow: 0 0 15px var(--accent-color);
            transition: width 0.1s linear;
        }

        .boot-status-text {
            margin-top: 10px;
            font-size: 10px;
            color: #666;
            font-family: 'JetBrains Mono';
            letter-spacing: 1px;
        }

        .boot-fade-out {
            animation: verticalWipe 0.8s cubic-bezier(0.8, 0, 0.2, 1) forwards;
        }

        @keyframes verticalWipe {
            0% {
                transform: scaleY(1);
                opacity: 1;
            }

            50% {
                transform: scaleY(1);
                opacity: 1;
                filter: brightness(2);
            }

            100% {
                transform: scaleY(0);
                opacity: 0;
            }
        }

        #preboot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 10001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .preboot-content {
            text-align: center;
            animation: prebootPulse 2s ease-in-out infinite;
        }

        .preboot-logo {
            font-size: 80px;
            color: var(--accent-color);
            margin-bottom: 30px;
            filter: drop-shadow(0 0 30px var(--accent-color));
        }

        .preboot-text {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            color: #888;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        .preboot-text span {
            color: var(--accent-color);
        }

        @keyframes prebootPulse {

            0%,
            100% {
                opacity: 0.7;
                transform: scale(1);
            }

            50% {
                opacity: 1;
                transform: scale(1.02);
            }
        }

        .preboot-fade-out {
            animation: prebootFade 0.5s ease-out forwards;
        }

        @keyframes prebootFade {
            to {
                opacity: 0;
                transform: scale(1.1);
            }
        }

        #image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 20000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(15px);
            animation: fadeIn 0.2s ease-out;
        }

        #modal-img {
            max-width: 90%;
            max-height: 90%;
            border-radius: 8px;
            box-shadow: 0 0 50px rgba(0, 0, 0, 0.8);
            border: 1px solid #333;
        }

        #modal-close {
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 30px;
            color: white;
            cursor: pointer;
            z-index: 20001;
            transition: all 0.2s;
            background: rgba(255, 255, 255, 0.1);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        #modal-close:hover {
            background: var(--accent-red);
            transform: rotate(90deg);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes spin {
            from {
                transform: rotate(0deg);
            }

            to {
                transform: rotate(360deg);
            }
        }

        #notification-area {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10000;
            display: flex;
            flex-direction: column;
            gap: 10px;
            pointer-events: none;
        }

        .toast {
            pointer-events: auto;
            background: rgba(20, 20, 25, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-left: 3px solid var(--accent-color);
            padding: 15px;
            border-radius: 12px;
            color: #fff;
            width: 300px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            animation: slideInRight 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            display: flex;
            flex-direction: column;
            gap: 6px;
            backdrop-filter: blur(20px);
        }

        .toast-title {
            font-weight: 700;
            font-size: 13px;
            color: var(--accent-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'JetBrains Mono', monospace;
        }

        .toast-msg {
            font-size: 13px;
            color: #ccc;
            line-height: 1.5;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(120%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateX(0);
            }

            to {
                opacity: 0;
                transform: translateX(20px);
            }
        }

        #desktop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 30px;
            display: flex;
            flex-direction: column;
            flex-wrap: wrap;
            gap: 20px;
            align-content: flex-start;
            z-index: 1;
        }

        .desktop-icon {
            width: 80px;
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: none;
            transition: transform 0.2s;
        }

        .icon-box {
            width: 60px;
            height: 60px;
            background: rgba(30, 30, 40, 0.4);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 8px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            overflow: hidden;
        }

        .icon-box::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.3s;
            pointer-events: none;
        }

        .desktop-icon:hover .icon-box {
            transform: translateY(-5px) scale(1.05);
            background: rgba(40, 40, 50, 0.6);
            border-color: var(--accent-color);
            box-shadow: 0 10px 25px rgba(23, 147, 209, 0.3);
        }

        .desktop-icon:hover .icon-box::after {
            opacity: 1;
            transform: scale(1);
        }

        .desktop-icon i {
            font-size: 28px;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
            transition: transform 0.3s;
        }

        .desktop-icon:hover i {
            transform: scale(1.1);
        }

        .icon-label {
            font-size: 12px;
            color: #e0e0e0;
            text-align: center;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.9);
            font-weight: 500;
            padding: 2px 8px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(4px);
        }

        .window {
            position: absolute;
            background: var(--window-bg);
            backdrop-filter: blur(20px) saturate(180%);
            -webkit-backdrop-filter: blur(20px) saturate(180%);
            border: var(--glass-border);
            border-radius: 12px;
            box-shadow: var(--glass-shadow);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 200px;
            min-height: 100px;
            transition: opacity 0.2s, transform 0.2s, width 0.3s, height 0.3s;
            animation: openWin 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes openWin {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
                filter: blur(10px);
            }

            to {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }

        .window.minimized {
            opacity: 0;
            transform: scale(0.8) translateY(200px);
            pointer-events: none;
        }

        .window.maximized {
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: calc(100% - 70px) !important;
            border-radius: 0;
        }

        .window-header {
            background: var(--window-header);
            padding: 0 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            user-select: none;
            height: 42px;
            box-sizing: border-box;
        }

        .window-title {
            font-size: 13px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #fff;
            font-family: 'Inter', sans-serif;
            letter-spacing: 0.5px;
            opacity: 0.9;
        }

        .window-controls {
            display: flex;
            gap: 8px;
        }

        .control-btn {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: none;
            position: relative;
            transition: transform 0.1s;
        }

        .control-btn:hover {
            transform: scale(1.2);
        }

        .close-btn {
            background: #ff5555;
        }

        .min-btn {
            background: #ffb86c;
        }

        .max-btn {
            background: #50fa7b;
        }

        .window-content {
            flex-grow: 1;
            overflow: hidden;
            position: relative;
        }

        .terminal-app {
            background-color: rgba(10, 10, 15, 0.9);
            color: #dcdcdc;
            font-family: 'JetBrains Mono', monospace;
            height: 100%;
            padding: 12px;
            box-sizing: border-box;
            font-size: 14px;
            display: flex;
            flex-direction: column;
        }

        .terminal-scroll {
            flex-grow: 1;
            overflow-y: auto;
            padding-right: 5px;
        }

        .term-line {
            margin-bottom: 4px;
            line-height: 1.6;
            word-wrap: break-word;
        }

        .term-input-line {
            display: flex;
            margin-top: 10px;
            align-items: center;
        }

        .prompt-user {
            color: #50fa7b;
            font-weight: bold;
        }

        .prompt-path {
            color: #8be9fd;
            font-weight: bold;
        }

        .term-input {
            background: transparent;
            border: none;
            color: #fff;
            font-family: inherit;
            font-size: inherit;
            flex-grow: 1;
            outline: none;
            caret-color: #50fa7b;
            font-weight: bold;
            cursor: none;
        }

        .chat-app {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: var(--chat-bg);
            font-family: 'Inter', sans-serif;
        }

        .chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chat-input-area {
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 10px;
        }

        .chat-input {
            flex-grow: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            outline: none;
            font-family: inherit;
            transition: border 0.2s;
            cursor: none;
        }

        .chat-input:focus {
            border-color: var(--accent-color);
        }

        .chat-btn {
            background: var(--accent-color);
            color: #1e1e2e;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 4px;
            cursor: none;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
            font-weight: bold;
        }

        .chat-btn:hover {
            transform: scale(1.05);
            filter: brightness(1.1);
        }

        .chat-bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 4px;
            font-size: 14px;
            line-height: 1.5;
            word-wrap: break-word;
            position: relative;
            animation: popIn 0.2s;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }

        .chat-bubble.user {
            align-self: flex-end;
            background: var(--accent-color);
            color: #fff;
            border-bottom-right-radius: 2px;
            font-weight: 500;
        }

        .chat-bubble.bot {
            align-self: flex-start;
            background: #2a2a35;
            color: #e6edf3;
            border-bottom-left-radius: 2px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-image {
            max-width: 100%;
            border-radius: 4px;
            margin-top: 5px;
            cursor: none;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .api-key-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }

        .browser-app {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: #2e3440;
            color: #fff;
        }

        .browser-bar {
            background: #1a1b26;
            padding: 10px 15px;
            display: flex;
            gap: 12px;
            border-bottom: 1px solid #000;
            align-items: center;
        }

        .browser-nav {
            color: #a9b1d6;
            cursor: none;
            padding: 6px;
            border-radius: 6px;
            transition: all 0.2s;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .browser-nav:hover {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
        }

        .url-bar {
            flex-grow: 1;
            background: #24283b;
            border: 1px solid #414868;
            padding: 6px 16px;
            border-radius: 4px;
            font-size: 13px;
            color: #c0caf5;
            display: flex;
            align-items: center;
            transition: border 0.2s;
            height: 20px;
        }

        .url-bar:focus-within {
            border-color: var(--accent-color);
        }

        .browser-content {
            flex-grow: 1;
            background: #1a1b26;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .browser-home {
            width: 100%;
            height: 100%;
            background: #1a1b26;
            background-image: radial-gradient(#24283b 1px, transparent 1px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 40px;
        }

        .dial-grid {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 800px;
            padding: 20px;
        }

        .dial-item {
            width: 120px;
            height: 120px;
            background: rgba(36, 40, 59, 0.8);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: all 0.2s;
            border: 1px solid #414868;
            backdrop-filter: blur(5px);
        }

        .dial-item:hover {
            transform: translateY(-5px);
            background: #2f3549;
            border-color: var(--accent-color);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }

        .dial-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }

        .dial-label {
            font-weight: 600;
            font-size: 13px;
            color: #c0caf5;
        }

        .tools-hub-container {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #1a1b26;
            gap: 40px;
        }

        .tools-header {
            font-size: 28px;
            font-weight: bold;
            color: #fff;
            text-align: center;
        }

        .tool-cards {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .tool-card {
            width: 220px;
            height: 160px;
            background: #24283b;
            border: 1px solid #414868;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .tool-card:hover {
            border-color: var(--accent-color);
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .tool-card:hover .tool-bg {
            opacity: 0.2;
            transform: scale(1.2);
        }

        .tool-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #1793d1, #7aa2f7);
            opacity: 0;
            transition: all 0.5s;
            z-index: 0;
        }

        .tool-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: #c0caf5;
            z-index: 1;
        }

        .tool-name {
            font-size: 16px;
            font-weight: bold;
            color: #fff;
            z-index: 1;
        }

        .tool-desc {
            font-size: 12px;
            color: #787c99;
            margin-top: 5px;
            z-index: 1;
            text-align: center;
        }

        .social-feed {
            width: 100%;
            height: 100%;
            overflow-y: auto;
            background: #0d1117;
            padding: 20px;
            box-sizing: border-box;
        }

        .github-layout {
            display: flex;
            gap: 20px;
            height: 100%;
        }

        .github-sidebar {
            width: 260px;
            flex-shrink: 0;
        }

        .github-main {
            flex-grow: 1;
            overflow-y: auto;
        }

        .profile-img {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #30363d;
            margin-bottom: 15px;
        }

        .profile-name {
            font-size: 24px;
            font-weight: bold;
            color: #c9d1d9;
        }

        .profile-login {
            font-size: 20px;
            color: #8b949e;
            font-weight: 300;
            margin-bottom: 15px;
        }

        .repo-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding-bottom: 20px;
        }

        .card {
            background: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s;
        }

        .card:hover {
            border-color: var(--accent-color);
            background: #161b22;
        }

        .card-left {
            flex-grow: 1;
            min-width: 0;
            margin-right: 15px;
        }

        .card-title {
            font-weight: bold;
            color: var(--accent-color);
            font-size: 16px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-desc {
            font-size: 13px;
            color: #8b949e;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
        }

        .card-meta {
            font-size: 12px;
            color: #8b949e;
            margin-top: 6px;
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 5px;
        }

        .card-actions {
            display: flex;
            gap: 10px;
        }

        .repo-btn {
            padding: 6px 12px;
            border: 1px solid #30363d;
            background: #21262d;
            color: #c9d1d9;
            border-radius: 6px;
            font-size: 12px;
            cursor: none;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: background 0.2s;
        }

        .repo-btn:hover {
            background: #30363d;
            color: #fff;
        }

        .insta-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
        }

        .insta-img {
            width: 100%;
            aspect-ratio: 1/1;
            object-fit: cover;
            border-radius: 4px;
            cursor: none;
            transition: transform 0.2s;
        }

        .insta-img:hover {
            transform: scale(1.05);
        }

        .discord-container {
            width: 100%;
            height: 100%;
            background: var(--discord-bg);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
        }

        .discord-modal {
            width: 600px;
            background: #232428;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
            position: relative;
            margin: 20px;
        }

        .discord-banner {
            height: 210px;
            background-color: #5865F2;
            background-size: cover;
            background-position: center;
        }

        .discord-avatar-wrapper {
            position: absolute;
            top: 156px;
            left: 20px;
            width: 128px;
            height: 128px;
            border-radius: 50%;
            background: #232428;
            padding: 7px;
        }

        .discord-avatar {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            position: relative;
            z-index: 1;
        }

        .discord-decoration {
            position: absolute;
            top: -18px;
            left: -18px;
            width: 164px;
            height: 164px;
            pointer-events: none;
            z-index: 2;
        }

        .discord-status-dot {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 5px solid #232428;
            position: absolute;
            bottom: 5px;
            right: 5px;
            z-index: 3;
        }

        .discord-badges {
            position: absolute;
            top: 220px;
            right: 20px;
            display: flex;
            gap: 4px;
            background: #111;
            padding: 4px;
            border-radius: 8px;
        }

        .discord-badge {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .discord-badge img {
            width: 22px;
            height: 22px;
        }

        .discord-body {
            margin-top: 80px;
            padding: 20px;
            background: #2b2d31;
            border-radius: 12px;
            margin: 16px;
            margin-top: 70px;
        }

        .discord-username {
            font-size: 22px;
            font-weight: 700;
            color: #fff;
        }

        .discord-handle {
            font-size: 14px;
            color: #b9bbbe;
            margin-bottom: 20px;
        }

        .discord-section-title {
            font-size: 11px;
            font-weight: 800;
            color: #b9bbbe;
            text-transform: uppercase;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .discord-bio {
            font-size: 14px;
            color: #dbdee1;
            white-space: pre-wrap;
            line-height: 1.4;
            margin-bottom: 20px;
        }

        .discord-activity-card {
            background: #111214;
            border-radius: 8px;
            padding: 12px;
            display: flex;
            gap: 12px;
            align-items: center;
            margin-top: 10px;
        }

        .vscode-layout {
            display: flex;
            height: 100%;
            background: #1e1e2e;
            color: #cdd6f4;
            font-family: 'Inter', 'Segoe UI', sans-serif;
            backdrop-filter: blur(10px);
        }

        .vscode-activity-bar {
            width: 50px;
            background: #11111b;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 12px;
            user-select: none;
            border-right: 1px solid rgba(255, 255, 255, 0.06);
        }

        .vscode-icon {
            font-size: 22px;
            color: #585b70;
            margin-bottom: 20px;
            cursor: none;
            padding: 8px;
            border-radius: 6px;
            width: 100%;
            box-sizing: border-box;
            transition: all 0.2s ease;
            display: flex;
            justify-content: center;
            position: relative;
        }

        .vscode-icon:hover {
            color: #cdd6f4;
            background: rgba(255, 255, 255, 0.05);
        }

        .vscode-icon.active {
            color: #cdd6f4;
        }

        .vscode-icon.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 2px;
            height: 50%;
            background: var(--accent-color);
            border-radius: 2px;
        }

        .vscode-sidebar {
            width: 220px;
            background: #181825;
            font-size: 13px;
            display: flex;
            flex-direction: column;
            border-right: 1px solid rgba(255, 255, 255, 0.06);
            user-select: none;
            overflow-y: auto;
        }

        .vscode-sidebar-header {
            padding: 12px 16px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: #6c7086;
            letter-spacing: 0.5px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.04);
        }

        .vscode-file {
            padding: 6px 16px 6px 24px;
            cursor: none;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #a6adc8;
            font-size: 13px;
            transition: all 0.15s ease;
            border-left: 2px solid transparent;
        }

        .vscode-file i {
            font-size: 15px;
            width: 18px;
            text-align: center;
        }

        .vscode-file:hover {
            background: rgba(255, 255, 255, 0.04);
            color: #cdd6f4;
        }

        .vscode-file.active {
            background: rgba(137, 180, 250, 0.1);
            color: #89b4fa;
            border-left-color: #89b4fa;
        }

        .vscode-main {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            background: #1e1e2e;
        }

        .vscode-tabs {
            display: flex;
            background: #11111b;
            overflow-x: auto;
            user-select: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            min-height: 38px;
        }

        .vscode-tab {
            padding: 10px 16px;
            background: transparent;
            color: #6c7086;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-right: 1px solid rgba(255, 255, 255, 0.04);
            cursor: none;
            min-width: 140px;
            transition: all 0.15s ease;
            position: relative;
        }

        .vscode-tab:hover {
            background: rgba(255, 255, 255, 0.04);
            color: #cdd6f4;
        }

        .vscode-tab.active {
            background: #1e1e2e;
            color: #cdd6f4;
        }

        .vscode-tab.active::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent-color);
        }

        .vscode-editor-area {
            flex-grow: 1;
            display: flex;
            overflow: hidden;
            position: relative;
            background: #1e1e2e;
        }

        .vscode-gutter {
            width: 55px;
            background: #1e1e2e;
            color: #45475a;
            text-align: right;
            padding-right: 16px;
            padding-top: 12px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 22px;
            user-select: none;
            border-right: 1px solid rgba(255, 255, 255, 0.04);
        }

        .vscode-code {
            flex-grow: 1;
            padding: 12px 16px;
            color: #cdd6f4;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            line-height: 22px;
            white-space: pre;
            overflow: auto;
            outline: none;
            cursor: text;
            user-select: text;
            -webkit-user-select: text;
            background: #1e1e2e;
            tab-size: 4;
        }

        .vscode-minimap {
            width: 70px;
            background: rgba(17, 17, 27, 0.5);
            border-left: 1px solid rgba(255, 255, 255, 0.04);
            overflow: hidden;
            opacity: 0.6;
            padding: 12px 4px;
            pointer-events: none;
            user-select: none;
            font-size: 2px;
            font-family: 'JetBrains Mono';
            color: rgba(205, 214, 244, 0.3);
            white-space: pre;
            line-height: 3px;
        }

        .vscode-status-bar {
            height: 24px;
            background: #89b4fa;
            color: #1e1e2e;
            display: flex;
            align-items: center;
            padding: 0 12px;
            font-size: 12px;
            justify-content: space-between;
            user-select: none;
            font-weight: 500;
        }

        .vscode-status-bar i {
            margin-right: 6px;
        }

        .token-keyword {
            color: #cba6f7;
            font-weight: 500;
        }

        .token-string {
            color: #a6e3a1;
        }

        .token-comment {
            color: #6c7086;
            font-style: italic;
        }

        .token-class {
            color: #89dceb;
            font-weight: 500;
        }

        .token-function {
            color: #89b4fa;
        }

        .token-number {
            color: #fab387;
        }

        .token-operator {
            color: #89dceb;
        }

        .token-decorator {
            color: #f9e2af;
        }

        .token-type {
            color: #89dceb;
            font-style: italic;
        }

        .sysmon-app {
            padding: 20px;
            height: 100%;
            box-sizing: border-box;
            font-family: 'JetBrains Mono', monospace;
            overflow-y: auto;
            color: #e6edf3;
            background: rgba(15, 15, 20, 0.95);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            align-content: start;
            backdrop-filter: blur(10px);
        }

        .sys-card {
            background: rgba(25, 25, 30, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 6px;
            padding: 15px;
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }

        .sys-card.full-width {
            grid-column: span 2;
        }

        .sys-title {
            font-size: 11px;
            color: var(--accent-color);
            text-transform: uppercase;
            margin-bottom: 10px;
            font-weight: bold;
            letter-spacing: 1px;
            display: flex;
            justify-content: space-between;
        }

        .sys-graph-container {
            height: 80px;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
            margin-bottom: 10px;
            border-radius: 4px;
        }

        .sys-graph-canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        .sys-stats-row {
            display: flex;
            justify-content: space-between;
            font-size: 18px;
            font-weight: bold;
            align-items: flex-end;
            margin-bottom: 4px;
        }

        .sys-stats-label {
            font-size: 11px;
            color: #888;
            font-weight: normal;
            opacity: 0.8;
        }

        .bar-wrap {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 8px;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.2s;
            box-shadow: 0 0 10px currentColor;
        }

        .proc-list {
            font-size: 11px;
            color: #bbb;
        }

        .proc-header {
            display: flex;
            justify-content: space-between;
            padding: 4px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--accent-color);
        }

        .proc-row {
            display: flex;
            justify-content: space-between;
            padding: 3px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .proc-name {
            flex-grow: 1;
        }

        .proc-cpu {
            width: 40px;
            text-align: right;
            color: var(--accent-green);
        }

        .proc-mem {
            width: 40px;
            text-align: right;
            color: var(--accent-yellow);
        }

        .explorer-app {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: linear-gradient(180deg, #1e1e2e 0%, #181825 100%);
        }

        .explorer-bar {
            padding: 14px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.06);
            font-size: 13px;
            color: #89b4fa;
            background: rgba(17, 17, 27, 0.8);
            font-family: 'JetBrains Mono', monospace;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .explorer-bar::before {
            content: '\f07b';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            color: #f9e2af;
        }

        .file-grid {
            padding: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 16px;
            overflow-y: auto;
            flex-grow: 1;
        }

        .file-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 16px 12px;
            border-radius: 12px;
            cursor: none;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            color: #cdd6f4;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid transparent;
        }

        .file-item:hover {
            background: rgba(137, 180, 250, 0.1);
            border-color: rgba(137, 180, 250, 0.2);
            transform: translateY(-2px);
        }

        .file-item:active {
            transform: scale(0.98);
        }

        .file-item i {
            font-size: 42px;
            margin-bottom: 12px;
            filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
            transition: transform 0.2s ease;
        }

        .file-item:hover i {
            transform: scale(1.1);
        }

        .file-item span {
            font-size: 12px;
            text-align: center;
            word-break: break-word;
            line-height: 1.3;
            color: #a6adc8;
        }

        .file-item:hover span {
            color: #cdd6f4;
        }

        .inspector-app {
            display: flex;
            height: 100%;
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
        }

        .inspector-sidebar {
            width: 220px;
            background: #1e1e24;
            border-right: 1px solid rgba(255, 255, 255, 0.05);
            overflow-y: auto;
        }

        .inspector-file {
            padding: 6px 12px;
            cursor: none;
            color: #a0a0a0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .inspector-file:hover {
            background: rgba(255, 255, 255, 0.05);
            color: #fff;
        }

        .inspector-file.active {
            background: rgba(23, 147, 209, 0.15);
            color: var(--accent-color);
            border-left: 2px solid var(--accent-color);
        }

        .inspector-main {
            flex-grow: 1;
            background: #16161a;
            padding: 15px;
            overflow: auto;
            white-space: pre;
            color: #e0e0e0;
            position: relative;
        }

        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--accent-color);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #taskbar {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: auto;
            min-width: 500px;
            height: 60px;
            background: var(--taskbar-bg);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            gap: 10px;
            z-index: 1000;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
            transition: width 0.3s;
        }

        #start-btn {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            background: rgba(23, 147, 209, 0.1);
            color: #1793d1;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            margin-right: 15px;
            transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
            border: 1px solid rgba(23, 147, 209, 0.3);
        }

        #start-btn:hover {
            transform: scale(1.15) translateY(-5px);
            background: rgba(23, 147, 209, 0.25);
            box-shadow: 0 5px 15px rgba(23, 147, 209, 0.4);
        }

        .arch-icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        .task-list {
            display: flex;
            gap: 10px;
            flex-grow: 1;
            justify-content: center;
        }

        .task-item {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            background: rgba(255, 255, 255, 0.03);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative;
            border: 1px solid transparent;
        }

        .task-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-8px) scale(1.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .task-item.active {
            background: rgba(255, 255, 255, 0.1);
            border-bottom: 2px solid var(--accent-color);
            border-radius: 10px 10px 4px 4px;
        }

        .task-item.active::after {
            content: '';
            position: absolute;
            bottom: -8px;
            width: 4px;
            height: 4px;
            background: var(--accent-color);
            border-radius: 50%;
            box-shadow: 0 0 5px var(--accent-color);
        }

        .task-item i {
            font-size: 22px;
            color: #ddd;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
        }

        #clock-area {
            margin-left: 20px;
            text-align: right;
            font-size: 12px;
            color: #e0e0e0;
            font-weight: 700;
            font-family: 'JetBrains Mono', monospace;
            background: rgba(0, 0, 0, 0.2);
            padding: 6px 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        /* Start Menu */
        #start-menu {
            position: absolute;
            bottom: 90px;
            left: calc(50% - 350px);
            /* Center relative to dock */
            width: 340px;
            background: rgba(20, 20, 25, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            display: none;
            flex-direction: column;
            gap: 10px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            z-index: 1001;
            animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .start-profile {
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 5px;
        }

        .start-avatar {
            width: 48px;
            height: 48px;
            background: #1793d1;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            color: #fff;
            box-shadow: 0 4px 10px rgba(23, 147, 209, 0.4);
        }

        .start-item {
            padding: 12px;
            border-radius: 8px;
            cursor: none;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: background 0.1s;
            color: #e5e9f0;
            font-weight: 500;
        }

        .start-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .start-item i {
            width: 24px;
            text-align: center;
            font-size: 18px;
        }

        /* --- CONTEXT MENU --- */
        #context-menu {
            position: absolute;
            background: rgba(30, 30, 46, 0.95);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 6px;
            width: 220px;
            display: none;
            flex-direction: column;
            z-index: 2000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .ctx-item {
            padding: 8px 12px;
            font-size: 13px;
            cursor: none;
            border-radius: 6px;
            display: flex;
            gap: 12px;
            align-items: center;
            color: #eceff4;
            transition: background 0.1s;
        }

        .ctx-item:hover {
            background: var(--accent-color);
            color: #fff;
            font-weight: 600;
        }

        .ctx-sep {
            height: 1px;
            background: rgba(255, 255, 255, 0.1);
            margin: 4px 0;
        }

        /* Code View */
        .code-view {
            padding: 15px;
            font-family: 'JetBrains Mono', monospace;
            white-space: pre-wrap;
            color: #e6edf3;
            font-size: 13px;
            line-height: 1.6;
            overflow: auto;
            height: 100%;
        }

        /* Sound Control Button */
        #sound-toggle {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: none;
            transition: all 0.2s;
            margin-left: 10px;
        }

        #sound-toggle:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.1);
        }

        #sound-toggle.muted {
            color: #e74c3c;
        }

        #sound-toggle i {
            font-size: 16px;
        }

        /* ========================================
           MOBILE & RESPONSIVE STYLES
           ======================================== */

        /* Tablet styles */
        @media (max-width: 1024px) {
            #taskbar {
                min-width: 400px;
                padding: 0 10px;
            }

            .window {
                width: 90% !important;
                left: 5% !important;
            }

            .dial-grid {
                gap: 15px;
            }

            .dial-item {
                width: 100px;
                height: 100px;
            }
        }

        /* Mobile styles */
        @media (max-width: 768px) {

            /* Show default cursor on mobile */
            body {
                cursor: auto;
            }

            #cursor-dot {
                display: none;
            }

            /* Desktop icons grid */
            #desktop {
                padding: 15px;
                gap: 10px;
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                align-content: start;
            }

            .desktop-icon {
                width: auto;
                height: auto;
            }

            .icon-box {
                width: 50px;
                height: 50px;
                border-radius: 14px;
            }

            .icon-label {
                font-size: 10px;
                padding: 2px 5px;
            }

            /* Taskbar adjustments */
            #taskbar {
                bottom: 10px;
                min-width: 90%;
                width: 90%;
                height: 55px;
                padding: 0 8px;
                gap: 5px;
                border-radius: 14px;
            }

            #start-btn {
                width: 40px;
                height: 40px;
                margin-right: 5px;
            }

            .task-item {
                width: 38px;
                height: 38px;
            }

            #clock-area {
                font-size: 10px;
                padding: 4px 8px;
                margin-left: 5px;
            }

            #sound-toggle {
                width: 32px;
                height: 32px;
            }

            /* Windows on mobile */
            .window {
                width: 95% !important;
                height: 80% !important;
                left: 2.5% !important;
                top: 5% !important;
                border-radius: 10px;
            }

            .window.maximized {
                height: calc(100% - 80px) !important;
                border-radius: 0;
            }

            .window-header {
                height: 38px;
                padding: 0 10px;
            }

            .window-title {
                font-size: 12px;
            }

            /* Start menu */
            #start-menu {
                left: 5%;
                width: 90%;
                bottom: 80px;
            }

            /* Browser */
            .dial-grid {
                gap: 10px;
                padding: 10px;
            }

            .dial-item {
                width: 80px;
                height: 80px;
            }

            .dial-icon {
                font-size: 28px;
            }

            .dial-label {
                font-size: 11px;
            }

            /* Tools */
            .tool-cards {
                flex-direction: column;
                gap: 15px;
            }

            .tool-card {
                width: 90%;
                height: 120px;
            }

            /* Terminal */
            .terminal-app {
                font-size: 12px;
                padding: 8px;
            }

            /* Chat */
            .chat-bubble {
                max-width: 90%;
                font-size: 13px;
            }

            /* VS Code */
            .vscode-sidebar {
                display: none;
            }

            .vscode-activity-bar {
                width: 40px;
            }

            .vscode-icon {
                font-size: 18px;
                margin-bottom: 15px;
            }

            /* Notifications */
            #notification-area {
                top: 10px;
                right: 10px;
            }

            .toast {
                width: 260px;
                padding: 10px;
            }

            /* Boot screen */
            .boot-content {
                padding: 15px;
            }

            #boot-log-fast {
                font-size: 9px;
                height: 300px;
            }

            .boot-title {
                font-size: 18px;
                letter-spacing: 4px;
            }

            #boot-logo {
                font-size: 50px;
            }

            .progress-container {
                width: 250px;
            }
        }

        /* Small phones */
        @media (max-width: 480px) {
            #desktop {
                grid-template-columns: repeat(3, 1fr);
                padding: 10px;
                gap: 8px;
            }

            .icon-box {
                width: 45px;
                height: 45px;
            }

            .icon-label {
                font-size: 9px;
            }

            #taskbar {
                height: 50px;
            }

            .task-item {
                width: 35px;
                height: 35px;
            }

            .window-header {
                height: 35px;
            }

            .control-btn {
                width: 10px;
                height: 10px;
            }
        }

        /* Landscape mode on mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            #taskbar {
                height: 45px;
                bottom: 5px;
            }

            .window {
                height: 85% !important;
                top: 2% !important;
            }

            #desktop {
                padding: 10px;
            }
        }

        /* Touch-friendly adjustments */
        @media (hover: none) and (pointer: coarse) {
            body {
                cursor: auto;
            }

            #cursor-dot {
                display: none;
            }

            .desktop-icon:hover .icon-box,
            .task-item:hover,
            .start-item:hover {
                transform: none;
            }

            .desktop-icon:active .icon-box {
                transform: scale(0.95);
                background: rgba(40, 40, 50, 0.6);
            }

            .task-item:active {
                transform: scale(0.95);
            }

            /* Larger touch targets */
            .control-btn {
                width: 14px;
                height: 14px;
            }

            .ctx-item {
                padding: 12px 15px;
            }

            .start-item {
                padding: 15px;
            }
        }
    </style>
</head>

<body>

    <!-- Custom Cursor Elements -->
    <div id="cursor-dot"></div>
    <!-- cursor-ring removed -->

    <!-- Image Modal -->
    <div id="image-modal">
        <div id="modal-close" onclick="closeImageModal()">&times;</div>
        <img id="modal-img" src="">
    </div>

    <!-- Notification Area -->
    <div id="notification-area"></div>

    <!-- Pre-Boot Click to Start Screen -->
    <div id="preboot-screen">
        <div class="preboot-content">
            <i class="fa-solid fa-power-off preboot-logo"></i>
            <div class="preboot-text">Click anywhere to <span>power on</span></div>
        </div>
    </div>

    <!-- Boot Screen (CINEMATIC) -->
    <div id="boot-screen">
        <div class="boot-content crt-turn-on">
            <!-- Initial Text Log -->
            <div id="boot-log-fast"></div>

            <!-- Main Graphical Boot -->
            <div id="boot-main-ui">
                <i id="boot-logo" class="fa-solid fa-brain glitch-effect"></i>
                <div class="boot-title">NEURAL OS</div>
                <div class="progress-container">
                    <div class="progress-bar" id="boot-progress"></div>
                </div>
                <div class="boot-status-text" id="boot-status">INITIALIZING KERNEL...</div>
            </div>
        </div>
    </div>

    <!-- Right Click Menu -->
    <div id="context-menu" style="display:none; position:absolute; z-index:2000;">
        <!-- Filled by JS -->
    </div>

    <!-- Start Menu -->
    <div id="start-menu">
        <div class="start-profile">
            <div class="start-avatar">A</div>
            <div>
                <div style="font-weight:bold; font-size: 16px;">Anish Vyapari</div>
                <div style="font-size:12px; color:#1793d1; margin-top: 2px;">root@neural-os</div>
            </div>
        </div>
        <div class="start-item" onclick="createWindow('Terminal', 'terminal')">
            <i class="fa-solid fa-terminal" style="color:#2ecc71"></i> Terminal
        </div>
        <div class="start-item" onclick="createWindow('NeuralBot', 'neuralchat')">
            <i class="fa-solid fa-robot" style="color:#9b59b6"></i> NeuralBot (AI)
        </div>
        <div class="start-item" onclick="createWindow('Browser', 'browser')">
            <i class="fa-solid fa-globe" style="color:#3498db"></i> Web Browser
        </div>
        <div class="start-item" onclick="createWindow('My Files', 'explorer')">
            <i class="fa-solid fa-folder" style="color:#f1c40f"></i> File Explorer
        </div>
        <div class="start-item" onclick="createWindow('VS Code', 'editor', 'neural_network.py')">
            <i class="fa-solid fa-code" style="color:#1793d1"></i> VS Code
        </div>
        <div class="start-item" onclick="location.reload()"
            style="margin-top:10px; color:#e74c3c; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 15px;">
            <i class="fa-solid fa-power-off"></i> System Shutdown
        </div>
    </div>

    <!-- Desktop -->
    <div id="desktop"></div>

    <!-- Taskbar -->
    <div id="taskbar">
        <div id="start-btn" onclick="toggleStartMenu()">
            <i class="fa-solid fa-brain" style="font-size: 26px;"></i>
        </div>
        <div class="task-list" id="task-list"></div>
        <div id="sound-toggle" onclick="toggleSound()" title="Toggle Sound Effects">
            <i class="fa-solid fa-volume-high"></i>
        </div>
        <div id="clock-area">
            <div id="clock-time">12:00</div>
            <div id="clock-date">Jan 01</div>
        </div>
    </div>

    <script>
        // =========================================
        // NEURAL OS SOUND ENGINE
        // =========================================
        class SoundEngine {
            constructor() {
                this.audioContext = null;
                this.masterGain = null;
                this.muted = false;
                this.initialized = false;
                this.volume = 0.5;  // Master volume (0-1) - Increased
            }

            // ... (keep init, resume, toggleMute, createOsc as is) ...

            // Initialize audio context
            init() {
                if (this.initialized) return;
                try {
                    this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    this.masterGain = this.audioContext.createGain();
                    this.masterGain.connect(this.audioContext.destination);
                    this.masterGain.gain.setValueAtTime(this.volume, this.audioContext.currentTime);
                    this.initialized = true;
                    console.log('ðŸ”Š SoundEngine initialized');
                } catch (e) {
                    console.warn('Web Audio API not supported', e);
                }
            }

            // Resume context if suspended (for autoplay policy)
            resume() {
                if (this.audioContext && this.audioContext.state === 'suspended') {
                    this.audioContext.resume();
                }
            }

            // Toggle mute
            toggleMute() {
                this.muted = !this.muted;
                if (this.masterGain) {
                    this.masterGain.gain.setValueAtTime(this.muted ? 0 : this.volume, this.audioContext.currentTime);
                }
                return this.muted;
            }

            // Create oscillator with envelope
            createOsc(type, freq, startTime, duration, gainVal = 0.5) {
                if (!this.initialized || this.muted) return;

                const osc = this.audioContext.createOscillator();
                const gain = this.audioContext.createGain();

                osc.type = type;
                osc.frequency.setValueAtTime(freq, startTime);

                gain.gain.setValueAtTime(0, startTime);
                gain.gain.linearRampToValueAtTime(gainVal, startTime + 0.05); // Faster attack
                gain.gain.exponentialRampToValueAtTime(0.001, startTime + duration);

                osc.connect(gain);
                gain.connect(this.masterGain);

                osc.start(startTime);
                osc.stop(startTime + duration);

                return { osc, gain };
            }

            // ========== SOUND EFFECTS ==========

            // Boot Power On - Classic PC beep
            bootBeep() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('square', 800, now, 0.15, 0.2);
            }

            // Boot Startup Chime - Ascending tones
            bootChime() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                // Creating a tech-y ascending flourish
                const notes = [440, 554.37, 659.25, 880]; // A4, C#5, E5, A5
                notes.forEach((freq, i) => {
                    this.createOsc('sine', freq, now + i * 0.1, 0.3, 0.2);
                });
            }

            // Boot Process - rapid data scrolling sound
            bootProcess() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                // Short, random high-pitch blips simulating HDD read / data stream
                const freq = 1200 + Math.random() * 800;
                this.createOsc('sawtooth', freq, now, 0.015, 0.08);
            }

            // Boot Complete - Rich Startup Chord (The "THX" style welcome)
            bootComplete() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;

                // C Major 7 Chord with depth
                // Root C4, C5
                this.createOsc('triangle', 261.63, now, 2.0, 0.3); // C4
                this.createOsc('sine', 523.25, now, 2.0, 0.3);     // C5

                // Harmony E5, G5, B5
                this.createOsc('sine', 659.25, now + 0.1, 1.9, 0.25); // E5
                this.createOsc('sine', 783.99, now + 0.1, 1.9, 0.25); // G5
                this.createOsc('sine', 987.77, now + 0.1, 1.9, 0.2);  // B5

                // High sparkle C6
                this.createOsc('sine', 1046.50, now + 0.2, 1.8, 0.15); // C6
            }

            // UI Click - Short click sound
            click() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('square', 600, now, 0.04, 0.1);
            }

            // UI Hover - Subtle blip
            hover() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 1200, now, 0.02, 0.05);
            }

            // Window Open - Whoosh up
            windowOpen() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;

                const osc = this.audioContext.createOscillator();
                const gain = this.audioContext.createGain();

                osc.type = 'sine';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.15);

                gain.gain.setValueAtTime(0.2, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.2);

                osc.connect(gain);
                gain.connect(this.masterGain);
                osc.start(now);
                osc.stop(now + 0.2);
            }

            // Window Close - Whoosh down
            windowClose() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;

                const osc = this.audioContext.createOscillator();
                const gain = this.audioContext.createGain();

                osc.type = 'sine';
                osc.frequency.setValueAtTime(500, now);
                osc.frequency.exponentialRampToValueAtTime(150, now + 0.12);

                gain.gain.setValueAtTime(0.15, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.15);

                osc.connect(gain);
                gain.connect(this.masterGain);
                osc.start(now);
                osc.stop(now + 0.15);
            }

            // Window Minimize - Descending blip
            windowMinimize() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 400, now, 0.08, 0.1);
                this.createOsc('sine', 300, now + 0.06, 0.1, 0.1);
            }

            // Window Maximize - Ascending blip
            windowMaximize() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 400, now, 0.08, 0.1);
                this.createOsc('sine', 600, now + 0.06, 0.1, 0.1);
            }

            // Notification - Soft chime
            notification() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 880, now, 0.1, 0.15);
                this.createOsc('sine', 1047, now + 0.1, 0.15, 0.12);
                this.createOsc('sine', 880, now + 0.25, 0.2, 0.1);
            }

            // Terminal Keypress - Typewriter sound
            terminalKey() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                // Create noise-like click
                const osc = this.audioContext.createOscillator();
                const gain = this.audioContext.createGain();

                osc.type = 'square';
                osc.frequency.setValueAtTime(80 + Math.random() * 100, now);

                gain.gain.setValueAtTime(0.05, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.03);

                osc.connect(gain);
                gain.connect(this.masterGain);
                osc.start(now);
                osc.stop(now + 0.03);
            }

            // Terminal Execute - Command confirmation
            terminalExecute() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 440, now, 0.08, 0.1);
                this.createOsc('sine', 554, now + 0.05, 0.1, 0.1);
            }

            // Terminal Error - Low buzz
            terminalError() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sawtooth', 120, now, 0.15, 0.1);
                this.createOsc('sawtooth', 100, now + 0.1, 0.15, 0.08);
            }

            // Start Menu Toggle - Pop sound
            menuToggle() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 350, now, 0.06, 0.15);
                this.createOsc('sine', 500, now + 0.03, 0.08, 0.1);
            }

            // Menu Item Hover - Subtle tick
            menuHover() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('triangle', 800, now, 0.015, 0.03);
            }

            // Log line during boot - Blip
            bootLog() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 400 + Math.random() * 200, now, 0.02, 0.02);
            }

            // Success sound - Achievement
            success() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 523, now, 0.1, 0.15);
                this.createOsc('sine', 659, now + 0.1, 0.1, 0.15);
                this.createOsc('sine', 784, now + 0.2, 0.2, 0.2);
            }

            // Focus window - Click
            windowFocus() {
                if (!this.initialized) return;
                const now = this.audioContext.currentTime;
                this.createOsc('sine', 500, now, 0.03, 0.08);
            }
        }

        // Global sound engine instance
        const soundEngine = new SoundEngine();

        // Initialize sound on first user interaction
        document.addEventListener('click', function initSound() {
            soundEngine.init();
            soundEngine.resume();
            document.removeEventListener('click', initSound);
        }, { once: true });

        document.addEventListener('keydown', function initSound() {
            soundEngine.init();
            soundEngine.resume();
            document.removeEventListener('keydown', initSound);
        }, { once: true });

        // Sound toggle function
        function toggleSound() {
            soundEngine.init();
            const muted = soundEngine.toggleMute();
            const btn = document.getElementById('sound-toggle');
            const icon = btn.querySelector('i');

            if (muted) {
                btn.classList.add('muted');
                icon.className = 'fa-solid fa-volume-xmark';
            } else {
                btn.classList.remove('muted');
                icon.className = 'fa-solid fa-volume-high';
                soundEngine.click();
            }
        }

        // Add hover sounds to interactive elements
        function setupHoverSounds() {
            const selectors = '.desktop-icon, .task-item, .start-item, .control-btn, .ctx-item, .tool-card, .dial-item';
            document.querySelectorAll(selectors).forEach(el => {
                el.addEventListener('mouseenter', () => soundEngine.hover());
            });
        }

        // =========================================
        // END SOUND ENGINE
        // =========================================

        // --- 0. CUSTOM CURSOR LOGIC ---
        const cursorDot = document.getElementById("cursor-dot");
        // cursorRing removed

        document.addEventListener("mousemove", (e) => {
            const posX = e.clientX;
            const posY = e.clientY;

            // Dot follows instantly
            cursorDot.style.left = `${posX}px`;
            cursorDot.style.top = `${posY}px`;

            // Ensure cursor is visible if we are getting mouse events
            if (document.body.classList.contains('cursor-hidden')) {
                document.body.classList.remove('cursor-hidden');
            }
        });

        document.addEventListener("mousedown", () => {
            document.body.classList.add("clicking");
        });

        document.addEventListener("mouseup", () => {
            document.body.classList.remove("clicking");
        });

        const interactiveSelectors = 'a, button, input, .desktop-icon, .window-header, .start-item, .task-item, .control-btn, .vscode-file, .inspector-file, .sys-card, .file-item, .browser-nav, .tool-card';

        document.body.addEventListener('mouseover', (e) => {
            if (e.target.closest(interactiveSelectors)) {
                document.body.classList.add('hovering');
            }
        });

        document.body.addEventListener('mouseout', (e) => {
            if (!e.relatedTarget && !e.toElement) {
                document.body.classList.add('cursor-hidden');
            }

            if (e.target.closest(interactiveSelectors)) {
                document.body.classList.remove('hovering');
            }
        });

        const SESSION_ID = 'Visitor-' + Math.floor(Math.random() * 0xFFFFFF).toString(16).toUpperCase();

        const DISCORD_ID = "1265981186283409571";
        const DISCORD_WEBHOOK = "__WEBHOOK_OTP__";

        const MISTRAL_API_KEY = "__MISTRAL_API_KEY__";

        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Code is like humor. When you have to explain it, it's bad.", author: "Cory House" },
            { text: "First, solve the problem. Then, write the code.", author: "John Johnson" },
            { text: "Simplicity is the soul of efficiency.", author: "Austin Freeman" },
            { text: "Make it work, make it right, make it fast.", author: "Kent Beck" },
            { text: "Any fool can write code that a computer can understand.", author: "Martin Fowler" },
            { text: "The best error message is the one that never shows up.", author: "Thomas Fuchs" },
            { text: "Talk is cheap. Show me the code.", author: "Linus Torvalds" },
            { text: "Deleted code is debugged code.", author: "Jeff Sickel" },
            { text: "There are only two hard things in CS: cache invalidation and naming things.", author: "Phil Karlton" },
            { text: "Debugging is twice as hard as writing the code in the first place.", author: "Brian Kernighan" },
            { text: "Truth can only be found in one place: the code.", author: "Robert C. Martin" }
        ];

        function getDailyQuote() {
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            return quotes[dayOfYear % quotes.length];
        }

        function getFormattedDate() {
            return new Date().toLocaleDateString('en-US', {
                weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
            });
        }

        function getUptime() {
            const start = new Date('2025-01-01');
            const diff = new Date() - start;
            const days = Math.floor(diff / 86400000);
            const hours = Math.floor((diff % 86400000) / 3600000);
            return days + 'd ' + hours + 'h';
        }

        const fileSystem = {
            "whoami.txt": {
                type: 'text',
                get content() {
                    const age = new Date().getFullYear() - 2006;
                    return `============================================\n         WHO AM I\n============================================\n\n  Name       : Anish Vyapari\n  Role       : AI/ML Engineer & Full-Stack Dev\n  Location   : India\n  Age        : ${age} years old\n\n  EDUCATION\n  ---------\n  BTech in Computer Science (AI & ML)\n  Ramrao Adik Institute of Technology\n  2025 - 2029\n\n  INTERESTS\n  ---------\n  - Artificial Intelligence & Machine Learning\n  - Deep Neural Networks\n  - Discord Bot Development\n  - Web Development (Full-Stack)\n  - Open Source Contributing\n\n  CONNECT\n  -------\n  GitHub    : github.com/AnishVyapari\n  Discord   : anish_vyapari\n  Instagram : @anish_vyapari\n  Website   : vyapari.space\n\n  "Building the future, one commit at a time."\n`;
                }
            },
            "quote_of_day.md": {
                type: 'text',
                get content() {
                    const q = getDailyQuote();
                    const date = getFormattedDate();
                    return `# Quote of the Day\n\n> "${q.text}"\n>\n> - ${q.author}\n\n---\n\nDate: ${date}\n\nThis quote changes every day!\nCome back tomorrow for a new one.\n\n---\n\nKeep coding!\n`;
                }
            },
            "skills.json": {
                type: 'code',
                get content() {
                    return `{\n  "developer": "Anish Vyapari",\n  "updated": "${new Date().toISOString().split('T')[0]}",\n\n  "languages": {\n    "expert": ["Python", "JavaScript", "HTML/CSS"],\n    "proficient": ["TypeScript", "Java", "C++"],\n    "learning": ["Rust", "Go", "Kotlin"]\n  },\n\n  "frameworks": {\n    "frontend": ["React", "Next.js", "TailwindCSS"],\n    "backend": ["FastAPI", "Node.js", "Express"],\n    "mobile": ["React Native"]\n  },\n\n  "ai_ml": {\n    "libraries": ["TensorFlow", "PyTorch", "scikit-learn"],\n    "specializations": ["Neural Networks", "NLP", "Vision"]\n  },\n\n  "tools": ["Git", "Docker", "Linux", "VS Code"],\n\n  "current_focus": "Building AI-powered applications"\n}\n`;
                }
            },
            "projects.md": {
                type: 'text',
                get content() {
                    return `# Featured Projects\n\n## NeuralOS\nThis portfolio you are looking at!\n\n- Glassmorphism UI with CRT boot effects\n- Multiple apps (Terminal, Browser, VS Code)\n- Custom sound engine\n- Fully responsive design\n\nTech: HTML, CSS, JavaScript\n\n---\n\n## Discord Bots\n\n### Multi-Purpose Bot\n- Music playback with Spotify\n- Server moderation tools\n- Custom commands\n- Leveling system\n\n### AI Assistant Bot\n- Powered by GPT-4\n- Image generation\n- Code assistance\n\nTech: Python, discord.py, PostgreSQL\n\n---\n\n## AI Tools Suite\n\n- Text summarizer\n- Image generator\n- Chatbot builder\n- Data analyzer\n\nLive at: vyapari.space/aitools\n\n---\n\nMore at: github.com/AnishVyapari\n`;
                }
            },
            "system.sh": {
                type: 'code',
                get content() {
                    const uptime = getUptime();
                    const date = getFormattedDate();
                    return `#!/bin/bash\n# NEURALOS SYSTEM INFORMATION\n\necho "SYSTEM STATUS"\necho "============"\n\nOS="NeuralOS v4.6.0-arch"\nKERNEL="Linux 6.1.0-neural"\nUPTIME="${uptime}"\nSHELL="/bin/zsh"\n\necho "  OS      : $OS"\necho "  Kernel  : $KERNEL"\necho "  Uptime  : $UPTIME"\necho "  Shell   : $SHELL"\necho ""\n\necho "HARDWARE"\necho "========"\necho "  CPU     : Neural Quantum Processor (128 cores)"\necho "  GPU     : RTX 5090 Neural Edition (48GB)"\necho "  RAM     : 64 GB DDR5-6400"\necho "  Storage : 2 TB NVMe SSD"\necho ""\n\necho "NETWORK"\necho "======="\necho "  Status  : Connected"\necho "  Speed   : 1 Gbps"\necho ""\n\necho "Date: ${date}"\necho "All systems operational!"\n`;
                }
            },
            "goals_2025.md": {
                type: 'text',
                get content() {
                    return `# Goals for 2025\n\n## Learning Goals\n- [x] Master Python advanced concepts\n- [x] Learn React & Next.js\n- [ ] Deep dive into Rust\n- [ ] Study system design patterns\n- [ ] Complete ML specialization\n\n## Project Goals\n- [x] Build NeuralOS portfolio\n- [x] Create AI tools website\n- [ ] Launch a SaaS product\n- [ ] Contribute to 10 open source projects\n- [ ] Build a mobile app\n\n## Career Goals\n- [ ] Get internship at top tech company\n- [ ] Build a project with 1000+ GitHub stars\n- [ ] Start tech blog/YouTube channel\n- [ ] Network with 50+ developers\n\n---\n\nProgress: 40% Complete\n\n"A goal without a plan is just a wish."\n\nUpdated: ${new Date().toLocaleDateString()}\n`;
                }
            },
            "contact.vcf": {
                type: 'text',
                get content() {
                    return 'BEGIN:VCARD\nVERSION:3.0\nN:Vyapari;Anish\nFN:Anish Vyapari\nTITLE:AI/ML Engineer & Full-Stack Developer\nEMAIL:contact@vyapari.space\nURL:https://vyapari.space\nURL:https://github.com/AnishVyapari\nEND:VCARD\n\n---\nCONTACT INFORMATION\n---\nGitHub    : github.com/AnishVyapari\nInstagram : @anish_vyapari\nDiscord   : anish_vyapari\nWebsite   : vyapari.space\n';
                }
            },
            "ascii_art.txt": {
                type: 'text',
                get content() {
                    return '\n    _          _     _     __     __\n   / \\   _ __ (_)___| |__  \\ \\   / /   _ _ __   __ _ _ __ (_)\n  / _ \\ | \'_ \\| / __| \'_ \\  \\ \\ / / | | | \'_ \\ / _` | \'_ \\| |\n / ___ \\| | | | \\__ \\ | | |  \\ V /| |_| | |_) | (_| | |_) | |\n/_/   \\_\\_| |_|_|___/_| |_|   \\_/  \\__, | .__/ \\__,_| .__/|_|\n                                  |___/|_|        |_|\n\n\n==============================================\n          Welcome to NeuralOS v4.6\n      The Developer Playground Portfolio\n==============================================\n\n   AI/ML Engineer\n   Full-Stack Dev\n   Open Source\n\nThanks for visiting!\n';
                }
            },
            "README.md": {
                type: 'text',
                get content() {
                    return `# NeuralOS v4.6\n\n> A cutting-edge portfolio OS simulation.\n\n## Features\n\n- Desktop Environment - macOS-inspired window manager\n- Terminal - Functional terminal with custom commands\n- Browser - Embedded portfolio browser\n- System Monitor - Real-time stats visualization\n- VS Code - Syntax-highlighted code editor\n- Sound Engine - Web Audio powered effects\n\n## Built With\n\nHTML5 + CSS3 + JavaScript\nNo frameworks. Pure vanilla.\n\n## Last Updated\n\n${getFormattedDate()}\n\n## Links\n\n- GitHub: github.com/AnishVyapari\n- Live Site: anishvyapari.github.io\n- Tools: vyapari.space\n\n---\n\nBuilt with love by Anish Vyapari\n`;
                }
            },
            "snake_game.py": {
                type: 'game',
                gameType: 'snake',
                content: "# Snake Game\n# Classic Retro Snake with Difficulty Slider\n# Use Arrow Keys to Move\n\nimport pygame\nimport time\n\n# Press RUN to Start!"
            },
            "memory_match.js": {
                type: 'game',
                gameType: 'memory',
                content: "// Memory Card Match\n// 1v1 Against AI\n// Flip cards to find pairs\n\nconst cards = ['ðŸ¶', 'ðŸ±', 'ðŸ­', ...];\n\n// Press RUN to Start!"
            },
            "tictactoe.py": {
                type: 'game',
                gameType: 'tictactoe',
                content: "# Tic-Tac-Toe AI\n# Unbeatable Minimax Algorithm\n# 1v1 Against Mistral AI\n\nclass AI:\n    def best_move(self):\n        return minimax()\n\n# Press RUN to Start!"
            },
            "clicker.js": {
                type: 'game',
                gameType: 'clicker',
                content: "// Idle Clicker (Conceptual)\n// Click to earn, buy upgrades\n\nlet score = 0;\nfunction click() { score++; }\n\n// Press RUN to Start!"
            }
        };


        const apps = [
            { name: "Terminal", type: "terminal", icon: "fa-terminal", color: "#2ecc71" },
            { name: "NeuralBot", type: "neuralchat", icon: "fa-robot", color: "#9b59b6" },
            { name: "Browser", type: "browser", icon: "fa-globe", color: "#3498db" },
            { name: "My Files", type: "explorer", icon: "fa-folder", color: "#f1c40f" },
            { name: "SysMon", type: "sysmon", icon: "fa-chart-line", color: "#e74c3c" },
            { name: "VS Code", type: "editor", icon: "fa-code", color: "#1793d1" },
        ];

        let highestZ = 100;
        let windows = [];

        const bootLogFast = document.getElementById('boot-log-fast');
        const bootMainUI = document.getElementById('boot-main-ui');
        const bootProgress = document.getElementById('boot-progress');
        const bootStatus = document.getElementById('boot-status');
        const bootScreen = document.getElementById('boot-screen');
        const fastLogs = [
            "BIOS Date 01/25/25 14:23:12 Ver: 4.6.0-arch",
            "CPU: Neural Quantum Processor (128 Cores)",
            "Memory Test: 65536K OK",
            "Detecting Primary Master ... NeuralOS NVMe 2TB",
            "Detecting Primary Slave  ... None",
            "Detecting Secondary Master ... None",
            " ",
            "Press F1 to Resume...",
            "Booting from /dev/nvme0n1...",
            "Loading x86_64-linux-gnu ...",
            "Loading initial ramdisk ...",
            "[ <span class='log-success-fast'>OK</span> ] Started Kernel Random Number Generator.",
            "[ <span class='log-success-fast'>OK</span> ] Created slice System Slice.",
            "[ <span class='log-success-fast'>OK</span> ] Created slice User and Session Slice.",
            "[ <span class='log-success-fast'>OK</span> ] Started Dispatch Password Requests to Console Directory Watch.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Local File Systems (Pre).",
            "[ <span class='log-success-fast'>OK</span> ] Mounted Huge Pages File System.",
            "[ <span class='log-success-fast'>OK</span> ] Mounted POSIX Message Queue File System.",
            "[ <span class='log-success-fast'>OK</span> ] Mounted Kernel Debug File System.",
            "[ <span class='log-success-fast'>OK</span> ] Mounted Kernel Trace File System.",
            "[ <span class='log-success-fast'>OK</span> ] Finished File System Check on /dev/disk/by-uuid/BOOT.",
            "[ <span class='log-success-fast'>OK</span> ] Mounted /boot.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Local File Systems.",
            "[ <span class='log-success-fast'>OK</span> ] Starting Create Volatile Files and Directories...",
            "[ <span class='log-success-fast'>OK</span> ] Started Network Manager Script Dispatcher Service.",
            "[ <span class='log-success-fast'>OK</span> ] Started WPA Supplicant.",
            "[ <span class='log-success-fast'>OK</span> ] Started Hostname Service.",
            "[ <span class='log-success-fast'>OK</span> ] Started Dispatcher daemon for systemd-networkd.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Network.",
            "         Starting Permit User Sessions...",
            "[ <span class='log-success-fast'>OK</span> ] Started Permit User Sessions.",
            "[ <span class='log-success-fast'>OK</span> ] Started Command Scheduler.",
            "         Starting Hold until boot process finishes up...",
            "[ <span class='log-success-fast'>OK</span> ] Started Serial Getty on ttyS0.",
            "[ <span class='log-success-fast'>OK</span> ] Started Getty on tty1.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Login Prompts.",
            "[ <span class='log-success-fast'>OK</span> ] Started Neural Neural Engine v4.6.",
            "[ <span class='log-warn-fast'>WARN</span> ] Bypass capacitor charge at 88%.",
            "[ <span class='log-success-fast'>OK</span> ] Mounted /dev/nvme0n1p2 at /mnt/data.",
            "[ <span class='log-success-fast'>OK</span> ] Listening on D-Bus System Message Bus Socket.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Sockets.",
            "[ <span class='log-success-fast'>OK</span> ] Reached target Basic System.",
            "[ <span class='log-success-fast'>OK</span> ] Started D-Bus System Message Bus.",
            "         Starting User Login Management...",
            "[ <span class='log-success-fast'>OK</span> ] Started User Login Management.",
            "[ <span class='log-success-fast'>OK</span> ] Started Neural Interface Daemon.",
            "         Initializing Graphics Subsystem...",
            "[ <span class='log-success-fast'>OK</span> ] Loaded Driver: nvidia_neural_x.",
            "[ <span class='log-success-fast'>OK</span> ] Display Manager Started.",
            "         Loading NeuralOS Desktop Environment...",
            "         Establish connection to Discord Gateway...",
            "[ <span class='log-success-fast'>OK</span> ] Gateway Connected (Latency: 12ms).",
            "         Mounting /home/anish/portfolio...",
            "[ <span class='log-success-fast'>OK</span> ] User Space Initialized."
        ];

        async function runBootSequence() {
            let i = 0;

            const addLog = () => {
                if (i >= fastLogs.length) {
                    setTimeout(() => {
                        bootLogFast.style.display = 'none';
                        bootMainUI.style.display = 'flex';
                        soundEngine.bootChime();
                        startProgressBar();
                    }, 500);
                    return;
                }

                const div = document.createElement('div');
                div.className = 'log-line-fast';
                div.innerHTML = fastLogs[i];
                bootLogFast.appendChild(div);
                bootLogFast.scrollTop = bootLogFast.scrollHeight;
                i++;

                let delay = 30;
                if (fastLogs[i - 1] && (fastLogs[i - 1].includes("Starting") || fastLogs[i - 1].includes("Loading") || fastLogs[i - 1].trim() === "")) {
                    delay = 200;
                } else if (Math.random() > 0.9) {
                    delay = 150;
                }

                setTimeout(addLog, delay);
            };

            addLog();

            function startProgressBar() {
                let width = 0;
                const totalBarTime = 4000;
                const intervalTime = 30;
                const step = 100 / (totalBarTime / intervalTime);

                const pInterval = setInterval(() => {
                    width += step;
                    if (width > 100) width = 100;
                    bootProgress.style.width = width + "%";

                    if (width < 20) bootStatus.innerText = "LOADING CORE MODULES...";
                    else if (width < 40) bootStatus.innerText = "VERIFYING FILESYSTEM INTEGRITY...";
                    else if (width < 60) bootStatus.innerText = "STARTING NEURAL ENGINE...";
                    else if (width < 80) bootStatus.innerText = "CONNECTING TO SECURE CLOUD...";
                    else if (width < 95) bootStatus.innerText = "INITIALIZING DESKTOP ENVIRONMENT...";
                    else {
                        bootStatus.innerText = "SYSTEM READY. WELCOME.";
                        if (width >= 100) {
                            clearInterval(pInterval);
                            finishBoot();
                        }
                    }
                }, intervalTime);
            }

            function finishBoot() {
                setTimeout(() => {
                    bootScreen.classList.add('boot-fade-out');
                    setTimeout(() => {
                        bootScreen.style.display = 'none';
                        initDesktop();
                    }, 800);
                }, 800);
            }
        }

        const prebootScreen = document.getElementById('preboot-screen');
        prebootScreen.addEventListener('click', function startSystem() {
            soundEngine.init();
            soundEngine.resume();

            soundEngine.bootBeep();

            prebootScreen.classList.add('preboot-fade-out');

            setTimeout(() => {
                prebootScreen.style.display = 'none';
                runBootSequence();
            }, 500);
        }, { once: true });

        function initDesktop() {
            soundEngine.init();
            soundEngine.bootComplete();

            const desk = document.getElementById('desktop');
            desk.innerHTML = '';
            apps.forEach(app => {
                const el = document.createElement('div');
                el.className = 'desktop-icon';
                el.innerHTML = `
                    <div class="icon-box">
                        <i class="fa-solid ${app.icon}" style="color: ${app.color}"></i>
                    </div>
                    <div class="icon-label">${app.name}</div>
                `;
                el.onclick = () => createWindow(app.name, app.type);
                el.addEventListener('mouseenter', () => soundEngine.hover());
                desk.appendChild(el);
            });

            updateClock();
            setInterval(updateClock, 1000);

            setTimeout(() => {
                showNotification("Welcome Visitor", "Click the <b>Browser</b> icon to view the full Portfolio & Projects.", 10000);
            }, 1000);

            logActivity("ðŸš€ A visitor has booted NeuralOS.");

            setTimeout(setupHoverSounds, 500);
        }

        function updateClock() {
            const now = new Date();
            const time = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const date = now.toLocaleDateString([], { weekday: 'short', month: 'short', day: 'numeric' });

            document.getElementById('clock-time').innerText = time;
            document.getElementById('clock-date').innerText = date;
        }

        function toggleStartMenu() {
            const menu = document.getElementById('start-menu');
            const isFlex = menu.style.display === 'flex';
            menu.style.display = isFlex ? 'none' : 'flex';

            soundEngine.menuToggle();

            if (!isFlex) {
                setTimeout(() => {
                    document.addEventListener('click', closeStartOutside);
                }, 100);
            }
        }

        function closeStartOutside(e) {
            const menu = document.getElementById('start-menu');
            const btn = document.getElementById('start-btn');
            if (!menu.contains(e.target) && !btn.contains(e.target)) {
                menu.style.display = 'none';
                document.removeEventListener('click', closeStartOutside);
            }
        }

        function showNotification(title, msg, duration = 5000) {
            soundEngine.notification();

            const area = document.getElementById('notification-area');
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.innerHTML = `<div class="toast-title"><span><i class="fa-solid fa-circle-info"></i> ${title}</span><i class="fa-solid fa-xmark" style="cursor:none" onclick="this.parentElement.parentElement.remove(); soundEngine.click();"></i></div><div class="toast-msg">${msg}</div>`;
            area.appendChild(toast);
            setTimeout(() => { toast.style.animation = "fadeOut 0.5s ease-out forwards"; setTimeout(() => toast.remove(), 500); }, duration);
        }

        function logActivity(activity, details = "") {
            const embed = {
                title: activity,
                description: details ? details.substring(0, 2000) : "No details",
                color: 3050323,
                footer: { text: `Session: ${SESSION_ID}` },
                timestamp: new Date().toISOString()
            };

            fetch(DISCORD_WEBHOOK, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ embeds: [embed] })
            }).catch(e => {
                console.warn("Discord Webhook Error (likely CORS):", e);
            });
        }

        function openImageModal(url) {
            const modal = document.getElementById('image-modal');
            const img = document.getElementById('modal-img');
            img.src = url;
            modal.style.display = 'flex';
        }
        function closeImageModal() {
            document.getElementById('image-modal').style.display = 'none';
        }

        function handleImgError(el) {
            el.parentElement.innerHTML += '<br><span style="color:#e74c3c">Generation failed.</span>';
        }

        function createWindow(title, type, contentKey = null) {
            soundEngine.windowOpen();

            logActivity(`ðŸ“‚ App Opened`, `User opened **${title}** (${type})`);

            highestZ++;
            const id = 'win-' + Date.now();
            const count = windows.length;
            const x = 50 + (count * 30) % 400;
            const y = 50 + (count * 30) % 300;

            const win = document.createElement('div');
            win.className = 'window';
            win.id = id;
            win.style.zIndex = highestZ;

            if (type === 'browser') {
                win.style.width = '85%';
                win.style.height = '85%';
                win.style.left = '7.5%';
                win.style.top = '7.5%';
            } else {
                win.style.left = x + 'px';
                win.style.top = y + 'px';
            }

            if (type === 'terminal') { win.style.width = '700px'; win.style.height = '480px'; }
            else if (type === 'sysmon') { win.style.width = '600px'; win.style.height = '450px'; }
            else if (type === 'inspector') { win.style.width = '850px'; win.style.height = '600px'; }
            else if (type === 'editor') { win.style.width = '900px'; win.style.height = '600px'; }
            else if (type === 'neuralchat') { win.style.width = '400px'; win.style.height = '600px'; }
            else if (type !== 'browser') { win.style.width = '600px'; win.style.height = '450px'; }

            let iconClass = apps.find(a => a.type === type)?.icon || 'fa-window-maximize';
            if (type === 'explorer') iconClass = 'fa-folder-open';
            if (type === 'editor' || type === 'inspector') iconClass = 'fa-code';

            win.innerHTML = `
                <div class="window-header" onmousedown="startDrag(event, '${id}')">
                    <div class="window-title"><i class="fa-solid ${iconClass}"></i> ${title}</div>
                    <div class="window-controls">
                        <div class="control-btn min-btn" onclick="toggleMin('${id}')"></div>
                        <div class="control-btn max-btn" onclick="toggleMax('${id}')"></div>
                        <div class="control-btn close-btn" onclick="closeWindow('${id}')"></div>
                    </div>
                </div>
                <div class="window-content" id="content-${id}"></div>
            `;

            document.body.appendChild(win);
            windows.push({ id, title, type, icon: iconClass });

            win.addEventListener('mousedown', () => focusWindow(id));
            renderContent(id, type, contentKey);
            updateTaskbar();
        }

        function focusWindow(id) { soundEngine.windowFocus(); highestZ++; const w = document.getElementById(id); if (w) w.style.zIndex = highestZ; updateTaskbar(); }
        function closeWindow(id) { soundEngine.windowClose(); document.getElementById(id).remove(); windows = windows.filter(w => w.id !== id); updateTaskbar(); }
        function toggleMin(id) { soundEngine.windowMinimize(); document.getElementById(id).classList.toggle('minimized'); }
        function toggleMax(id) { soundEngine.windowMaximize(); document.getElementById(id).classList.toggle('maximized'); }

        function startDrag(e, id) {
            if (e.target.closest('.window-controls')) return;
            const win = document.getElementById(id);
            focusWindow(id);
            let shiftX = e.clientX - win.getBoundingClientRect().left;
            let shiftY = e.clientY - win.getBoundingClientRect().top;
            function moveAt(x, y) { if (win.classList.contains('maximized')) return; win.style.left = x - shiftX + 'px'; win.style.top = y - shiftY + 'px'; }
            function onMove(e) { moveAt(e.pageX, e.pageY); }
            document.addEventListener('mousemove', onMove);
            document.onmouseup = function () { document.removeEventListener('mousemove', onMove); document.onmouseup = null; };
        }

        function updateTaskbar() {
            const list = document.getElementById('task-list');
            list.innerHTML = '';
            windows.forEach(w => {
                const item = document.createElement('div');
                item.className = 'task-item';
                const el = document.getElementById(w.id);
                if (parseInt(el.style.zIndex) === highestZ && !el.classList.contains('minimized')) item.classList.add('active');
                item.innerHTML = `<i class="fa-solid ${w.icon}"></i>`;
                item.onclick = () => { if (el.classList.contains('minimized')) el.classList.remove('minimized'); focusWindow(w.id); };
                list.appendChild(item);
            });
        }

        function renderContent(id, type, key) {
            const container = document.getElementById(`content-${id}`);

            if (type === 'terminal') {
                container.innerHTML = `<div class="terminal-app"><div class="terminal-scroll" id="term-out-${id}"><div class="term-line" style="color:#1793d1; font-weight:bold;">NeuralOS Kernel v4.6.0-arch</div><div class="term-line">Type <span style="color:#f1c40f">'help'</span> to see commands.</div><br></div><div class="term-input-line"><span class="prompt-user">root@neural-vm</span><span style="color:#fff">:</span><span class="prompt-path">~</span><span style="color:#fff">$</span> &nbsp;<input type="text" class="term-input" onkeydown="handleTerm(event, this, '${id}')" autocomplete="off"></div></div>`;
                setTimeout(() => container.querySelector('input').focus(), 100);
            }
            else if (type === 'browser') {
                container.innerHTML = `
                    <div class="browser-app">
                        <div class="browser-bar">
                            <div class="browser-nav" onclick="navBrowser('${id}', 'home')"><i class="fa-solid fa-house"></i></div>
                            <div class="browser-nav" onclick="navBrowser('${id}', 'back')"><i class="fa-solid fa-arrow-left"></i></div>
                            <div class="url-bar"><i class="fa-solid fa-lock" style="color:#2ecc71; margin-right:8px;"></i> <span id="url-${id}">Portfolio Hub</span></div>
                        </div>
                        <div class="browser-content" id="frame-${id}"></div>
                    </div>`;
                navBrowser(id, 'home');
            }
            else if (type === 'neuralchat') {
                container.innerHTML = `
                    <div class="chat-app">
                        <div class="chat-messages" id="chat-messages-${id}">
                            <div class="chat-bubble bot">Hello! I am NeuralBot. Ask me about Anish, his projects, or ask me to generate an image! <br><span style="font-size:10px;color:#888">(Note: Requires API Key for chat)</span></div>
                        </div>
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" placeholder="Ask something..." onkeydown="if(event.key==='Enter') handleChat('${id}')" id="chat-input-${id}">
                            <button class="chat-btn" onclick="handleChat('${id}')"><i class="fa-solid fa-paper-plane"></i></button>
                        </div>
                        <div id="key-modal-${id}" class="api-key-modal" style="display:none">
                            <div style="background:#2e3440; padding:20px; border-radius:8px; width:80%; max-width:300px; border: 1px solid #4c566a;">
                                <h3>Mistral API Key Required</h3>
                                <p style="font-size:12px; color:#aaa; margin-bottom:15px">To chat with the AI, please enter a valid Mistral API Key. It will be saved locally.</p>
                                <input type="password" id="api-key-input-${id}" placeholder="Enter Key" style="width:100%; padding:8px; margin-bottom:10px; background:#3b4252; border:1px solid #4c566a; color:white; border-radius:4px;">
                                <button onclick="saveApiKey('${id}')" style="background:#1793d1; color:#fff; border:none; padding:8px 16px; border-radius:4px; cursor:none; font-weight:bold;">Save</button>
                                <button onclick="document.getElementById('key-modal-${id}').style.display='none'" style="background:transparent; color:#d8dee9; border:none; padding:8px; cursor:none; margin-top:5px">Cancel</button>
                            </div>
                        </div>
                    </div>`;
            }
            else if (type === 'sysmon') {
                // DASHBOARD SYSTEM MONITOR
                container.innerHTML = `
                    <div class="sysmon-app">
                        <!-- CPU -->
                        <div class="sys-card">
                            <div class="sys-title"><span>CPU Usage</span> <i class="fa-solid fa-microchip"></i></div>
                            <div class="sys-stats-row">
                                <span id="cpu-val-${id}" style="color:#2ecc71">0%</span>
                                <span class="sys-stats-label">3.42 GHz</span>
                            </div>
                            <div class="sys-graph-container">
                                <canvas id="cpu-chart-${id}" class="sys-graph-canvas"></canvas>
                            </div>
                        </div>

                        <!-- Memory -->
                        <div class="sys-card">
                            <div class="sys-title"><span>Memory</span> <i class="fa-solid fa-memory"></i></div>
                            <div class="sys-stats-row">
                                <span id="mem-val-${id}" style="color:#f1c40f">0%</span>
                                <span class="sys-stats-label" id="mem-abs-${id}">0 / 64 GB</span>
                            </div>
                            <div class="sys-graph-container">
                                <canvas id="mem-chart-${id}" class="sys-graph-canvas"></canvas>
                            </div>
                        </div>
                        
                        <!-- Network -->
                         <div class="sys-card full-width">
                            <div class="sys-title"><span>Network History</span> <i class="fa-solid fa-network-wired"></i></div>
                            <div class="sys-graph-container" style="height: 60px;">
                                <canvas id="net-chart-${id}" class="sys-graph-canvas"></canvas>
                            </div>
                            <div style="display:flex; gap:20px; font-size:12px; color:#a0a0a0;">
                                <span><i class="fa-solid fa-arrow-down" style="color:#2ecc71"></i> <span id="net-down-${id}">0 KB/s</span></span>
                                <span><i class="fa-solid fa-arrow-up" style="color:#e74c3c"></i> <span id="net-up-${id}">0 KB/s</span></span>
                            </div>
                        </div>

                        <!-- Top Processes -->
                        <div class="sys-card full-width">
                            <div class="sys-title"><span>Top Processes</span> <i class="fa-solid fa-list-check"></i></div>
                            <div class="proc-list">
                                <div class="proc-header">
                                    <span>NAME</span> <span>CPU</span> <span>MEM</span>
                                </div>
                                <div id="proc-rows-${id}">
                                    <!-- JS Puts Rows Here -->
                                </div>
                            </div>
                        </div>
                    </div>`;
                startSysMonGraph(id);
            }
            else if (type === 'editor') {
                // REALISTIC VS CODE
                const fileName = key || 'whoami.txt';
                const fileContent = (fileSystem[fileName] && fileSystem[fileName].content) ? fileSystem[fileName].content : "# Start typing...";
                const displayContent = escapeHtml(fileContent);
                const lines = fileContent.split('\n').length;
                let lineNums = '';
                for (let i = 1; i <= Math.max(lines, 20); i++) lineNums += i + '<br>';

                container.innerHTML = `
                    <div class="vscode-layout">
                        <div class="vscode-activity-bar">
                            <i class="fa-regular fa-file vscode-icon active"></i>
                            <i class="fa-solid fa-search vscode-icon"></i>
                            <i class="fa-solid fa-code-branch vscode-icon"></i>
                            <i class="fa-solid fa-bug vscode-icon"></i>
                            <i class="fa-solid fa-layer-group vscode-icon"></i>
                        </div>
                        <div class="vscode-sidebar">
                            <div style="padding:10px; font-size:11px; text-transform:uppercase;">Explorer</div>
                            <div class="vscode-sidebar-header"><i class="fa-solid fa-chevron-down"></i> &nbsp; NEURAL-PROJECT</div>
                            ${Object.keys(fileSystem).map(f => {
                    let icon = 'fa-file', iconColor = '#6c7086';
                    if (f.endsWith('.py')) { icon = 'fa-brands fa-python'; iconColor = '#3572A5'; }
                    else if (f.endsWith('.js')) { icon = 'fa-brands fa-js'; iconColor = '#f1e05a'; }
                    else if (f.endsWith('.txt')) { icon = 'fa-solid fa-file-lines'; iconColor = '#89b4fa'; }
                    else if (f.endsWith('.md')) { icon = 'fa-solid fa-book'; iconColor = '#89dceb'; }
                    else if (f.endsWith('.json')) { icon = 'fa-solid fa-code'; iconColor = '#fab387'; }
                    else if (f.endsWith('.sh')) { icon = 'fa-solid fa-terminal'; iconColor = '#a6e3a1'; }
                    else if (f.endsWith('.vcf')) { icon = 'fa-solid fa-address-card'; iconColor = '#f38ba8'; }
                    return `<div class="vscode-file ${f === fileName ? 'active' : ''}" onclick="switchVSCodeFile('${id}', '${f}')"><i class="${icon}" style="color:${iconColor}"></i> ${f}</div>`
                }).join('')}
                        </div>
                        <div class="vscode-main">
                            <div class="vscode-tabs">
                                <div class="vscode-tab active"><i class="fa-brands fa-python" style="color:#1793d1"></i> <span id="vscode-tab-title-${id}">${fileName}</span> &nbsp; &times;</div>
                                <div style="margin-left:auto; display:flex; align-items:center; gap:8px; padding-right:10px;">
                                    <button onclick="runVSCode('${id}')" style="background:#2ecc71; color:#fff; border:none; padding:5px 15px; border-radius:4px; cursor:pointer; font-weight:bold; display:flex; align-items:center; gap:5px;"><i class="fa-solid fa-play"></i> RUN</button>
                                </div>
                            </div>
                            <div class="vscode-editor-area">
                                <div class="vscode-gutter" id="vscode-gutter-${id}">${lineNums}</div>
                                <div class="vscode-code" id="vscode-code-${id}" contenteditable="true" spellcheck="false" oninput="updateVSCodeGutter('${id}')">${displayContent}</div>
                                <div class="vscode-minimap" id="vscode-minimap-${id}">${fileContent}</div>
                            </div>
                            <div class="vscode-status-bar">
                                <div><i class="fa-solid fa-code-branch"></i> main &nbsp;&nbsp; <i class="fa-regular fa-circle-xmark"></i> 0 &nbsp;&nbsp; <i class="fa-solid fa-triangle-exclamation"></i> 0</div>
                                <div>Ln 1, Col 1 &nbsp;&nbsp; UTF-8 &nbsp;&nbsp; <span id="vscode-lang-${id}">Python</span></div>
                            </div>
                        </div>
                    </div>`;
            }
            else if (type === 'inspector') {
                container.innerHTML = `
                    <div class="inspector-app">
                        <div class="inspector-sidebar" id="tree-${id}">
                            <div style="padding:10px; color:#888; text-align:center"><div class="loading-spinner"></div>Fetching Files...</div>
                        </div>
                        <div class="inspector-main" id="code-${id}">
                            <div style="color:#888; margin-top:20px; text-align:center">// Select a file to view content.</div>
                        </div>
                    </div>`;
                fetchRepoTree(id, key);
            }
            else if (type === 'explorer') {
                let html = '<div class="explorer-app"><div class="explorer-bar">/home/anish/neural-project</div><div class="file-grid">';
                Object.keys(fileSystem).forEach(f => {
                    let icon = 'fa-file-lines', color = '#a6adc8';
                    if (f.endsWith('.py')) { icon = 'fa-brands fa-python'; color = '#3572A5'; }
                    else if (f.endsWith('.js')) { icon = 'fa-brands fa-js'; color = '#f1e05a'; }
                    else if (f.endsWith('.txt')) { icon = 'fa-solid fa-file-lines'; color = '#89b4fa'; }
                    else if (f.endsWith('.md')) { icon = 'fa-solid fa-book'; color = '#89dceb'; }
                    else if (f.endsWith('.json')) { icon = 'fa-solid fa-code'; color = '#fab387'; }
                    else if (f.endsWith('.sh')) { icon = 'fa-solid fa-terminal'; color = '#a6e3a1'; }
                    else if (f.endsWith('.vcf')) { icon = 'fa-solid fa-address-card'; color = '#f38ba8'; }
                    html += `<div class="file-item" onclick="createWindow('${f}', 'editor', '${f}')"><i class="fa-solid ${icon}" style="color:${color}"></i><span>${f}</span></div>`;
                });
                html += '</div></div>';
                container.innerHTML = html;
            }
            else if (type === 'game') {
                container.innerHTML = `<div id="game-container-${id}" class="game-app"></div>`;
                renderGame(id, key);
            }
        }

        function runVSCode(id) {
            soundEngine.terminalExecute();
            createWindow('Neural Arena', 'game', 'menu');
        }

        function switchVSCodeFile(id, fileName) {
            logActivity("ðŸ“‚ File Accessed", `User opened **${fileName}** in VS Code`);

            const container = document.getElementById(`content-${id}`);
            if (!container) return;

            const sidebarFiles = container.querySelectorAll('.vscode-file');
            sidebarFiles.forEach(el => {
                el.classList.remove('active');
                if (el.innerText.trim() === fileName) el.classList.add('active');
            });

            const tabTitle = document.getElementById(`vscode-tab-title-${id}`);
            if (tabTitle) tabTitle.innerText = fileName;

            const codeArea = document.getElementById(`vscode-code-${id}`);
            const gutter = document.getElementById(`vscode-gutter-${id}`);
            const minimap = document.getElementById(`vscode-minimap-${id}`);
            const langStatus = document.getElementById(`vscode-lang-${id}`);

            if (fileSystem[fileName]) {
                const content = fileSystem[fileName].content;
                codeArea.innerHTML = escapeHtml(content);
                minimap.innerText = content;

                const lines = content.split('\n').length;
                let lineNums = '';
                for (let i = 1; i <= Math.max(lines, 20); i++) lineNums += i + '<br>';
                gutter.innerHTML = lineNums;

                if (fileName.endsWith('.py')) langStatus.innerText = "Python";
                else if (fileName.endsWith('.md')) langStatus.innerText = "Markdown";
                else langStatus.innerText = "Plain Text";
            }
        }

        function updateVSCodeGutter(id) {
            const codeArea = document.getElementById(`vscode-code-${id}`);
            const gutter = document.getElementById(`vscode-gutter-${id}`);
            const minimap = document.getElementById(`vscode-minimap-${id}`);
            if (!codeArea || !gutter) return;

            const content = codeArea.innerText;
            minimap.innerText = content;

            const lines = content.split('\n').length;
            let lineNums = '';
            for (let i = 1; i <= Math.max(lines, 20); i++) lineNums += i + '<br>';
            gutter.innerHTML = lineNums;
        }

        function saveApiKey(id) {
            const input = document.getElementById(`api-key-input-${id}`);
            if (input.value.trim()) {
                localStorage.setItem('mistral_key', input.value.trim());
                document.getElementById(`key-modal-${id}`).style.display = 'none';
                showNotification('API Key Saved', 'You can now use NeuralBot.');
            }
        }

        async function generateImage(prompt, msgAreaId) {
            const msgArea = document.getElementById(msgAreaId);

            const bubble = document.createElement('div');
            bubble.className = "chat-bubble bot";
            bubble.innerHTML = `Generating image: <b>${prompt}</b>...<br><div class="loading-spinner"></div>`;
            msgArea.appendChild(bubble);
            msgArea.scrollTop = msgArea.scrollHeight;

            const seed = Math.floor(Math.random() * 1000000);
            const url = `https://image.pollinations.ai/prompt/${encodeURIComponent(prompt)}?width=512&height=512&seed=${seed}&nologo=true`;

            try {
                const res = await fetch(url);
                if (!res.ok) throw new Error("Pollinations API Error");
                const blob = await res.blob();
                const imgUrl = URL.createObjectURL(blob);

                bubble.innerHTML = `Generated: <b>${prompt}</b><br><img src="${imgUrl}" class="chat-image" onclick="openImageModal('${imgUrl}')">`;
                logActivity("ðŸŽ¨ Image Generated", `User generated image for prompt: "${prompt}"`);

            } catch (e) {
                bubble.innerHTML += `<br><span style="color:#e74c3c">Generation failed: ${e.message}</span>`;
            }
            msgArea.scrollTop = msgArea.scrollHeight;
        }

        async function handleChat(id) {
            const input = document.getElementById(`chat-input-${id}`);
            const msgArea = document.getElementById(`chat-messages-${id}`);
            const text = input.value.trim();
            if (!text) return;

            msgArea.innerHTML += `<div class="chat-bubble user">${text}</div>`;
            input.value = '';
            msgArea.scrollTop = msgArea.scrollHeight;

            logActivity("ðŸ’¬ Chat Message", text);

            if (text.toLowerCase().startsWith('generate image')) {
                const prompt = text.replace(/generate image/i, '').trim();
                await generateImage(prompt, `chat-messages-${id}`);
                return;
            }

            let apiKey = MISTRAL_API_KEY;
            if (!apiKey || apiKey.length === 0) {
                apiKey = localStorage.getItem('mistral_key');
            }

            if (!apiKey) {
                document.getElementById(`key-modal-${id}`).style.display = 'flex';
                return;
            }

            const startYear = 2025;
            const currYear = new Date().getFullYear();
            let collegeStatus = "Student";

            if (currYear < startYear) {
                collegeStatus = "Incoming Student";
            } else if (currYear >= 2029) {
                collegeStatus = "Graduated Engineer";
            } else {
                const yearNum = currYear - startYear + 1;
                const suffix = (yearNum === 1) ? 'st' : (yearNum === 2) ? 'nd' : (yearNum === 3) ? 'rd' : 'th';
                collegeStatus = `${yearNum}${suffix} Year Student`;
            }

            const systemPrompt = `You are NeuralBot, an AI assistant for Anish Vyapari's portfolio.
            Knowledge Base:
            - Name: Anish Vyapari
            - Role: AI/ML Engineer, Discord Bot Developer, Full-Stack Developer.
            - Education: BTech CSE (AI & ML) at RAIT (2025-2028). Current Status: ${collegeStatus}.
            - Socials: GitHub (AnishVyapari), Instagram (anish_vyapari), Discord ID (1265981186283409571).
            - Projects: NeuralOS, AI Tools.
            Constraint: Do not answer questions unrelated to Anish, his portfolio, or technical skills. Keep answers concise. If asked to generate an image, reply with 'generate image <prompt>'.`;

            try {
                const res = await fetch('https://api.mistral.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: "mistral-tiny",
                        messages: [
                            { role: "system", content: systemPrompt },
                            { role: "user", content: text }
                        ]
                    })
                });

                if (!res.ok) throw new Error("API Error");
                const data = await res.json();
                const reply = data.choices[0].message.content;

                // Check if AI wants to generate image
                if (reply.toLowerCase().startsWith('generate image')) {
                    const prompt = reply.replace(/generate image/i, '').trim();
                    await generateImage(prompt, `chat-messages-${id}`);
                } else {
                    msgArea.innerHTML += `<div class="chat-bubble bot">${reply}</div>`;
                }

                msgArea.scrollTop = msgArea.scrollHeight;

            } catch (e) {
                console.error(e);
                msgArea.innerHTML += `<div class="chat-bubble bot" style="color:#e74c3c">Error: Could not connect to AI. Check your API Key (Console for details).</div>`;
            }
        }



        // --- GAME LOGIC (Tic-Tac-Toe vs AI) ---
        const gameStates = {};

        function renderGame(id, gameType) {
            const container = document.getElementById(`game-container-${id}`);
            if (!container) return;
            container.style.cssText = "height:100%; background:#1e1e2e; display:flex; flex-direction:column; align-items:center; justify-content:center; color:white; font-family:'Inter', sans-serif; position:relative;";

            if (gameType === 'menu') {
                container.innerHTML = `
                    <div style="font-size:32px; font-weight:bold; margin-bottom:40px; text-shadow:0 0 10px #a29bfe; font-family:'JetBrains Mono';">NEURAL ARENA</div>
                    <div style="display:flex; gap:20px;">
                        <div onclick="startGame('${id}', 'tictactoe')" style="background:rgba(46, 204, 113, 0.1); padding:20px; width:150px; border-radius:12px; cursor:none; text-align:center; transition:all 0.2s; border:2px solid #27ae60;" onmouseover="this.style.background='rgba(46, 204, 113, 0.3)'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(46, 204, 113, 0.1)'; this.style.transform='scale(1)'">
                            <div style="font-size:40px; margin-bottom:10px;">â­•âŒ</div>
                            <div style="font-weight:bold;">Tic-Tac-Toe</div>
                            <div style="font-size:12px; margin-top:5px; opacity:0.8; color:#2ecc71">vs AI Bot</div>
                        </div>
                        <div onclick="startGame('${id}', 'rps')" style="background:rgba(231, 76, 60, 0.1); padding:20px; width:150px; border-radius:12px; cursor:none; text-align:center; transition:all 0.2s; border:2px solid #e74c3c;" onmouseover="this.style.background='rgba(231, 76, 60, 0.3)'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(231, 76, 60, 0.1)'; this.style.transform='scale(1)'">
                            <div style="font-size:40px; margin-bottom:10px;">âœ‚ï¸ðŸ“„ðŸª¨</div>
                            <div style="font-weight:bold;">Rock Paper Scissors</div>
                            <div style="font-size:12px; margin-top:5px; opacity:0.8; color:#e74c3c">vs AI Bot</div>
                        </div>
                    </div>
                    <div style="display:flex; gap:20px; margin-top:20px;">
                        <div onclick="startGame('${id}', 'memory')" style="background:rgba(155, 89, 182, 0.1); padding:20px; width:150px; border-radius:12px; cursor:none; text-align:center; transition:all 0.2s; border:2px solid #9b59b6;" onmouseover="this.style.background='rgba(155, 89, 182, 0.3)'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(155, 89, 182, 0.1)'; this.style.transform='scale(1)'">
                            <div style="font-size:40px; margin-bottom:10px;">ðŸ§ ðŸƒ</div>
                            <div style="font-weight:bold;">Memory Match</div>
                            <div style="font-size:12px; margin-top:5px; opacity:0.8; color:#9b59b6">vs AI Bot</div>
                        </div>
                        <div onclick="startGame('${id}', 'snake')" style="background:rgba(241, 196, 15, 0.1); padding:20px; width:150px; border-radius:12px; cursor:none; text-align:center; transition:all 0.2s; border:2px solid #f1c40f;" onmouseover="this.style.background='rgba(241, 196, 15, 0.3)'; this.style.transform='scale(1.05)'" onmouseout="this.style.background='rgba(241, 196, 15, 0.1)'; this.style.transform='scale(1)'">
                            <div style="font-size:40px; margin-bottom:10px;">ðŸ</div>
                            <div style="font-weight:bold;">Snake</div>
                            <div style="font-size:12px; margin-top:5px; opacity:0.8; color:#f1c40f">Speed Slider</div>
                        </div>
                    </div>
                `;
            } else if (gameType === 'tictactoe') {
                startTicTacToe(id, container);
            } else if (gameType === 'rps') {
                startRPS(id, container);
            } else if (gameType === 'memory') {
                startMemory(id, container);
            } else if (gameType === 'snake') {
                startSnake(id, container);
            }
        }

        function startGame(id, type) {
            renderGame(id, type);
        }

        function startTicTacToe(id, container) {
            gameStates[id] = { board: Array(9).fill(null), turn: 'X', active: true }; // User is X

            container.innerHTML = `
                <div style="font-size:24px; font-weight:bold; margin-bottom:20px;">Tic-Tac-Toe vs AI</div>
                <div id="ttt-status-${id}" style="margin-bottom:15px; height:20px; color:#a29bfe; font-weight:bold;">Your Turn (X)</div>
                <div style="display:grid; grid-template-columns:repeat(3, 1fr); gap:10px; background:#2d3436; padding:10px; border-radius:12px;">
                    ${Array(9).fill(0).map((_, i) => `<div id="cell-${id}-${i}" onclick="handleTTTMove('${id}', ${i})" style="width:80px; height:80px; background:#636e72; display:flex; align-items:center; justify-content:center; font-size:40px; font-weight:bold; border-radius:8px; cursor:none; transition:background 0.2s;"></div>`).join('')}
                </div>
                <button onclick="startGame('${id}', 'menu')" style="margin-top:30px; background:transparent; border:1px solid #636e72; color:#ccc; padding:8px 16px; border-radius:6px; cursor:none; transition:all 0.2s;" onmouseover="this.style.borderColor='#fff'; this.style.color='#fff'" onmouseout="this.style.borderColor='#636e72'; this.style.color='#ccc'">Back to Menu</button>
            `;
        }

        async function handleTTTMove(id, index) {
            const state = gameStates[id];
            if (!state || !state.active || state.board[index] !== null || state.turn !== 'X') return;

            // Player Move
            makeMove(id, index, 'X');

            if (checkWin(state.board, 'X')) { endGame(id, 'You Win!'); soundEngine.windowFocus(); return; }
            if (state.board.every(c => c !== null)) { endGame(id, 'Draw!'); return; }

            // AI Turn
            state.turn = 'O';
            document.getElementById(`ttt-status-${id}`).innerText = "AI Thinking...";

            // AI Move via API
            try {
                const aiIndex = await getAIMove(state.board);
                if (state.active && aiIndex !== -1 && state.board[aiIndex] === null) {
                    makeMove(id, aiIndex, 'O');
                    if (checkWin(state.board, 'O')) { endGame(id, 'AI Wins!'); return; }
                    if (state.board.every(c => c !== null)) { endGame(id, 'Draw!'); return; }

                    state.turn = 'X';
                    document.getElementById(`ttt-status-${id}`).innerText = "Your Turn (X)";
                } else {
                    // Fallback random if API fails (or key missing)
                    console.log("AI Failed or No Key, using Random");
                    setTimeout(() => fallbackAIMove(id), 500);
                }
            } catch (e) {
                console.error("AI Error", e);
                setTimeout(() => fallbackAIMove(id), 500);
            }
        }

        function makeMove(id, index, player) {
            gameStates[id].board[index] = player;
            const cell = document.getElementById(`cell-${id}-${index}`);
            cell.innerText = player;
            cell.style.color = player === 'X' ? '#2ecc71' : '#e74c3c';
            cell.style.background = '#2d3436';
            if (player === 'O') soundEngine.terminalKey();
        }

        function checkWin(board, p) {
            const wins = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
            return wins.some(c => board[c[0]] === p && board[c[1]] === p && board[c[2]] === p);
        }

        function endGame(id, msg) {
            gameStates[id].active = false;
            document.getElementById(`ttt-status-${id}`).innerText = msg;
            document.getElementById(`ttt-status-${id}`).style.color = msg.includes('Win') ? (msg.includes('You') ? '#2ecc71' : '#e74c3c') : '#f1c40f';
        }

        function fallbackAIMove(id) {
            const state = gameStates[id];
            if (!state.active) return;
            const empty = state.board.map((v, i) => v === null ? i : null).filter(v => v !== null);
            if (empty.length > 0) {
                const rnd = empty[Math.floor(Math.random() * empty.length)];
                makeMove(id, rnd, 'O');
                if (checkWin(state.board, 'O')) { endGame(id, 'AI Wins!'); return; }
                if (state.board.every(c => c !== null)) { endGame(id, 'Draw!'); return; }
                state.turn = 'X';
                document.getElementById(`ttt-status-${id}`).innerText = "Your Turn (X)";
            }
        }

        async function getAIMove(board) {
            let apiKey = typeof MISTRAL_API_KEY !== 'undefined' ? MISTRAL_API_KEY : '';
            if (!apiKey || apiKey.length === 0) {
                apiKey = localStorage.getItem('mistral_key');
            }

            if (!apiKey) return -1; // No key

            // Simple visual representation for the AI
            const boardStr = board.map((c, i) => c ? c : i).join('');
            const prompt = `You are playing Tic-Tac-Toe. You are 'O'. Opponent is 'X'. Current Board: [${boardStr}]. Board indices are 0-8. Return ONLY the single digit integer (0-8) of your best move. Do not explain.`;

            const res = await fetch('https://api.mistral.ai/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "mistral-tiny",
                    messages: [
                        { role: "system", content: "You are a Tic-Tac-Toe expert. Output only the move index." },
                        { role: "user", content: prompt }
                    ],
                    max_tokens: 5
                })
            });

            if (!res.ok) throw new Error("API Error");
            const data = await res.json();
            const text = data.choices[0].message.content.trim();
            const move = parseInt(text.match(/\d+/)[0]);

            return isNaN(move) ? -1 : move;
        }

        // --- ROCK PAPER SCISSORS LOGIC ---
        function startRPS(id, container) {
            container.innerHTML = `
                <div style="font-size:24px; font-weight:bold; margin-bottom:20px;">Rock Paper Scissors</div>
                <div id="rps-status-${id}" style="margin-bottom:30px; height:40px; font-size:18px; color:#a29bfe; font-weight:bold; text-align:center;">Choose your weapon</div>
                
                <div style="display:flex; gap:20px; margin-bottom:30px;">
                    ${['Rock ðŸª¨', 'Paper ðŸ“„', 'Scissors âœ‚ï¸'].map(m => {
                const move = m.split(' ')[0];
                return `<div onclick="handleRPSMove('${id}', '${move}')" style="background:#2d3436; padding:20px; border-radius:12px; cursor:none; text-align:center; min-width:100px; transition:transform 0.2s; border:2px solid #636e72;" onmouseover="this.style.transform='translateY(-5px)'; this.style.borderColor='#e74c3c'" onmouseout="this.style.transform='translateY(0)'; this.style.borderColor='#636e72'">
                            <div style="font-size:40px;">${m.split(' ')[1]}</div>
                            <div style="font-weight:bold; margin-top:10px;">${move}</div>
                        </div>`;
            }).join('')}
                </div>
                
                <div id="rps-result-${id}" style="font-size:20px; font-weight:bold; min-height:30px;"></div>
                <button onclick="startGame('${id}', 'menu')" style="margin-top:30px; background:transparent; border:1px solid #636e72; color:#ccc; padding:8px 16px; border-radius:6px; cursor:none; transition:all 0.2s;" onmouseover="this.style.borderColor='#fff'; this.style.color='#fff'" onmouseout="this.style.borderColor='#636e72'; this.style.color='#ccc'">Back to Menu</button>
            `;
        }

        async function handleRPSMove(id, playerMove) {
            const status = document.getElementById(`rps-status-${id}`);
            const resultDisplay = document.getElementById(`rps-result-${id}`);

            status.innerHTML = `<span style="color:#f1c40f">AI Thinking...</span>`;

            // AI Move
            let aiMove = "Rock";
            try {
                aiMove = await getAIMoveRPS(playerMove);
            } catch (e) {
                console.error("AI RPS Error", e);
                const moves = ['Rock', 'Paper', 'Scissors'];
                aiMove = moves[Math.floor(Math.random() * moves.length)];
            }

            // Determine Winner
            let result = "";
            let color = "";

            if (playerMove === aiMove) {
                result = "It's a Draw!";
                color = "#f1c40f";
            } else if (
                (playerMove === 'Rock' && aiMove === 'Scissors') ||
                (playerMove === 'Paper' && aiMove === 'Rock') ||
                (playerMove === 'Scissors' && aiMove === 'Paper')
            ) {
                result = "You Win!";
                color = "#2ecc71";
                soundEngine.windowFocus(); // Success sound
            } else {
                result = "AI Wins!";
                color = "#e74c3c";
                soundEngine.terminalKey(); // Fail sound (reused)
            }

            status.innerHTML = `You: <b style="color:#2ecc71">${playerMove}</b> vs AI: <b style="color:#e74c3c">${aiMove}</b>`;
            resultDisplay.innerHTML = `<span style="color:${color}">${result}</span>`;
        }

        async function getAIMoveRPS(playerMove) {
            let apiKey = typeof MISTRAL_API_KEY !== 'undefined' ? MISTRAL_API_KEY : '';
            if (!apiKey || apiKey.length === 0) {
                apiKey = localStorage.getItem('mistral_key');
            }

            if (!apiKey) throw new Error("No Key");

            const prompt = `User played: ${playerMove}. You are a ruthless AI trying to destroy the user. Output the move that BEATS ${playerMove} (Rock, Paper, or Scissors). ONLY output the word.`;

            const res = await fetch('https://api.mistral.ai/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: "mistral-tiny",
                    messages: [
                        { role: "system", content: "You are a ruthless gaming AI. You must WIN every game. Output only the winning move." },
                        { role: "user", content: prompt }
                    ],
                    max_tokens: 5
                })
            });

            if (!res.ok) throw new Error("API Error");
            const data = await res.json();
            const text = data.choices[0].message.content.trim().replace(/[^a-zA-Z]/g, '');
            // Normalize
            if (text.toLowerCase().includes('rock')) return 'Rock';
            if (text.toLowerCase().includes('paper')) return 'Paper';
            if (text.toLowerCase().includes('scissor')) return 'Scissors';
            return 'Rock'; // Fallback
        }

        // --- MEMORY MATCH LOGIC ---
        function startMemory(id, container) {
            gameStates[id] = {
                cards: [],
                flipped: [],
                matched: [],
                turn: 'Player',
                aiMemory: {},
                active: true,
                scores: { Player: 0, AI: 0 }
            };

            const emojis = ['ðŸ¶', 'ðŸ±', 'ðŸ­', 'ðŸ¹', 'ðŸ°', 'ðŸ¦Š', 'ðŸ»', 'ðŸ¼'];
            const deck = [...emojis, ...emojis].sort(() => 0.5 - Math.random());
            gameStates[id].cards = deck;

            container.innerHTML = `
                <div style="font-size:24px; font-weight:bold; margin-bottom:10px;">Memory Match</div>
                <div id="mem-status-${id}" style="margin-bottom:20px; height:20px; color:#a29bfe; font-weight:bold;">Your Turn</div>
                <div style="display:flex; gap:20px; margin-bottom:20px;">
                    <div style="color:#2ecc71">You: <span id="score-player-${id}">0</span></div>
                    <div style="color:#e74c3c">AI: <span id="score-ai-${id}">0</span></div>
                </div>
                <div style="display:grid; grid-template-columns:repeat(4, 1fr); gap:10px; background:#2d3436; padding:10px; border-radius:12px;">
                    ${deck.map((_, i) => `<div id="card-${id}-${i}" onclick="handleCardClick('${id}', ${i})" style="width:60px; height:60px; background:#636e72; display:flex; align-items:center; justify-content:center; font-size:30px; border-radius:8px; cursor:none; transition:transform 0.2s;">â“</div>`).join('')}
                </div>
                <button onclick="startGame('${id}', 'menu')" style="margin-top:20px; background:transparent; border:1px solid #636e72; color:#ccc; padding:8px 16px; border-radius:6px; cursor:none;">Back to Menu</button>
            `;
        }

        function handleCardClick(id, index) {
            const state = gameStates[id];
            if (!state.active || state.turn !== 'Player' || state.flipped.length >= 2 || state.flipped.includes(index) || state.matched.includes(index)) return;

            flipCard(id, index);

            if (state.flipped.length === 2) {
                setTimeout(() => checkMatch(id), 1000);
            }
        }

        function flipCard(id, index) {
            const state = gameStates[id];
            const card = document.getElementById(`card-${id}-${index}`);
            card.innerText = state.cards[index];
            card.style.background = '#dfe6e9';
            card.style.color = '#2d3436';
            card.style.transform = 'rotateY(180deg)';
            state.flipped.push(index);

            // AI remembers this card
            state.aiMemory[index] = state.cards[index];
        }

        function checkMatch(id) {
            const state = gameStates[id];
            const [i1, i2] = state.flipped;
            const match = state.cards[i1] === state.cards[i2];

            if (match) {
                state.matched.push(i1, i2);
                state.scores[state.turn]++;
                document.getElementById(`score-${state.turn.toLowerCase()}-${id}`).innerText = state.scores[state.turn];

                document.getElementById(`card-${id}-${i1}`).style.visibility = 'hidden'; // Hide matched
                document.getElementById(`card-${id}-${i2}`).style.visibility = 'hidden';

                if (state.matched.length === state.cards.length) {
                    const winner = state.scores.Player > state.scores.AI ? "You Win!" : (state.scores.AI > state.scores.Player ? "AI Wins!" : "Draw!");
                    endGame(id, winner); // Reuse TicTacToe endGame function logic concept
                    document.getElementById(`mem-status-${id}`).innerText = winner;
                    state.active = false;
                    return;
                }
                // Keep turn if match
            } else {
                // No match, flip back
                document.getElementById(`card-${id}-${i1}`).innerText = 'â“';
                document.getElementById(`card-${id}-${i1}`).style.background = '#636e72';
                document.getElementById(`card-${id}-${i2}`).innerText = 'â“';
                document.getElementById(`card-${id}-${i2}`).style.background = '#636e72';

                // Switch turn
                state.turn = state.turn === 'Player' ? 'AI' : 'Player';
                document.getElementById(`mem-status-${id}`).innerText = state.turn === 'Player' ? "Your Turn" : "AI Turn";
            }
            state.flipped = [];

            if (state.turn === 'AI' && state.active) {
                setTimeout(() => aiMemoryTurn(id), 1000);
            }
        }

        function aiMemoryTurn(id) {
            const state = gameStates[id];
            if (!state.active) return;

            // AI Logic: Check memory for pairs
            let foundPair = null;
            const memoryIndices = Object.keys(state.aiMemory).map(Number).filter(i => !state.matched.includes(i));

            // Look for matching pairs in memory
            for (let i = 0; i < memoryIndices.length; i++) {
                for (let j = i + 1; j < memoryIndices.length; j++) {
                    const idx1 = memoryIndices[i];
                    const idx2 = memoryIndices[j];
                    if (state.aiMemory[idx1] === state.aiMemory[idx2]) {
                        foundPair = [idx1, idx2];
                        break;
                    }
                }
                if (foundPair) break;
            }

            let firstMove = -1;
            let secondMove = -1;

            if (foundPair) {
                [firstMove, secondMove] = foundPair;
            } else {
                // Pick random unrevealed
                const available = state.cards.map((_, i) => i).filter(i => !state.matched.includes(i) && !state.flipped.includes(i));
                firstMove = available[Math.floor(Math.random() * available.length)];

                // Check if the random first card matches anything in memory (cheating slightly? no, just lucky connection)
                // Actually, if we flip one, and we know the match, we should pick it.
            }

            // Execute moves
            flipCard(id, firstMove);

            setTimeout(() => {
                if (foundPair) {
                    flipCard(id, secondMove);
                } else {
                    // Try to find match for first card in memory
                    const matchInMemory = Object.keys(state.aiMemory).map(Number).find(i => i !== firstMove && !state.matched.includes(i) && state.aiMemory[i] === state.cards[firstMove]);
                    if (matchInMemory !== undefined) {
                        secondMove = matchInMemory;
                    } else {
                        const available = state.cards.map((_, i) => i).filter(i => !state.matched.includes(i) && !state.flipped.includes(i));
                        secondMove = available[Math.floor(Math.random() * available.length)];
                    }
                    flipCard(id, secondMove);
                }
                setTimeout(() => checkMatch(id), 1000);
            }, 800);
        }

        // --- SNAKE LOGIC ---
        // --- SNAKE LOGIC (1v1 AI BATTLE) ---
        function startSnake(id, container) {
            container.innerHTML = `
                <div style="font-size:24px; font-weight:bold; margin-bottom:10px;">Snake AI Battle</div>
                <div style="display:flex; align-items:center; gap:10px; margin-bottom:10px;">
                    <span>Speed:</span>
                    <input type="range" id="snake-speed-${id}" min="1" max="20" value="12" style="accent-color:#f1c40f;">
                    <button onclick="initSnakeGame('${id}')" style="background:#f1c40f; border:none; color:#2d3436; padding:5px 15px; border-radius:4px; font-weight:bold; cursor:none;">Start Battle</button>
                    <div style="margin-left:auto; font-size:12px;"> You: <span style="color:#f1c40f">Yellow</span> | AI: <span style="color:#e74c3c">Red</span></div>
                </div>
                <canvas id="snake-canvas-${id}" width="300" height="300" style="background:#2d3436; border:2px solid #555; border-radius:8px;"></canvas>
                <div style="margin-top:10px; color:#aaa; font-size:12px;">Use Arrow Keys to Move. Don't hit walls, yourself, or the enemy!</div>
                <button onclick="startGame('${id}', 'menu')" style="margin-top:10px; background:transparent; border:1px solid #636e72; color:#ccc; padding:4px 12px; border-radius:6px; cursor:none;">Back</button>
            `;
        }

        function initSnakeGame(id) {
            const canvas = document.getElementById(`snake-canvas-${id}`);
            const ctx = canvas.getContext('2d');
            const speedInput = document.getElementById(`snake-speed-${id}`);
            const speed = parseInt(speedInput.value);

            // Stop existing loop if any
            if (gameStates[id]?.interval) clearInterval(gameStates[id].interval);

            let snake = [];
            // Start length 10
            for (let i = 0; i < 10; i++) snake.push({ x: 10 - i, y: 10 });

            // AI Snake
            let aiSnake = [];
            for (let i = 0; i < 5; i++) aiSnake.push({ x: 25 + i, y: 25 });

            gameStates[id] = {
                snake: snake,
                aiSnake: aiSnake,
                food: { x: 15, y: 15 },
                dx: 1, dy: 0,       // Player Dir
                adx: -1, ady: 0,    // AI Dir
                active: true,
                interval: null
            };

            // Keyboard listener needs to be global but filtered by ID/Active window? 
            // Currently existing `keydown` is not window specific. 
            // We'll attach a specific handler or hook into global.
            // For simplicity, we'll assign the current key handler to this game instance.

            gameStates[id].interval = setInterval(() => updateSnake(id, ctx), 1000 / speed);
        }

        // Hooking into global keydown for Snake controls
        document.addEventListener('keydown', (e) => {
            // Find active snake game
            const activeId = Object.keys(gameStates).find(id => document.getElementById(`snake-canvas-${id}`));
            if (!activeId) return;
            const state = gameStates[activeId];

            switch (e.key) {
                case 'ArrowUp': if (state.dy === 0) { state.dx = 0; state.dy = -1; } break;
                case 'ArrowDown': if (state.dy === 0) { state.dx = 0; state.dy = 1; } break;
                case 'ArrowLeft': if (state.dx === 0) { state.dx = -1; state.dy = 0; } break;
                case 'ArrowRight': if (state.dx === 0) { state.dx = 1; state.dy = 0; } break;
            }
        });

        function updateSnake(id, ctx) {
            const state = gameStates[id];
            if (!state || !state.active) return;

            // --- 1. PLAYER MOVE ---
            const head = { x: state.snake[0].x + state.dx, y: state.snake[0].y + state.dy };
            if (checkCollision(head, state)) { gameOverSnake(id, ctx, "You Crashed!"); return; }
            state.snake.unshift(head);
            if (head.x === state.food.x && head.y === state.food.y) {
                soundEngine.terminalKey(); // Nom
                state.food = getRandomFood(state);
            } else {
                state.snake.pop();
            }

            // --- 2. AI MOVE (Greedy Pathfinding) ---
            // If AI snake exists (it should), move it
            if (state.aiSnake) {
                const aiHead = state.aiSnake[0];
                const distX = state.food.x - aiHead.x;
                const distY = state.food.y - aiHead.y;

                let moves = [];
                // Greedy Preference
                if (Math.abs(distX) > Math.abs(distY)) {
                    if (distX > 0) moves.push({ x: 1, y: 0 }); else moves.push({ x: -1, y: 0 });
                    if (distY > 0) moves.push({ x: 0, y: 1 }); else moves.push({ x: 0, y: -1 });
                } else {
                    if (distY > 0) moves.push({ x: 0, y: 1 }); else moves.push({ x: 0, y: -1 });
                    if (distX > 0) moves.push({ x: 1, y: 0 }); else moves.push({ x: -1, y: 0 });
                }
                [{ x: 1, y: 0 }, { x: -1, y: 0 }, { x: 0, y: 1 }, { x: 0, y: -1 }].forEach(m => {
                    if (!moves.some(mv => mv.x === m.x && mv.y === m.y)) moves.push(m);
                });

                let safeMove = null;
                for (let m of moves) {
                    if (m.x === -state.adx && m.y === -state.ady) continue; // No 180s
                    const next = { x: aiHead.x + m.x, y: aiHead.y + m.y };
                    if (!checkCollisionAI(next, state)) {
                        safeMove = m;
                        break;
                    }
                }

                if (safeMove) {
                    state.adx = safeMove.x; state.ady = safeMove.y;
                    const nextAiHead = { x: aiHead.x + state.adx, y: aiHead.y + state.ady };
                    state.aiSnake.unshift(nextAiHead);
                    if (nextAiHead.x === state.food.x && nextAiHead.y === state.food.y) {
                        state.food = getRandomFood(state);
                    } else {
                        state.aiSnake.pop();
                    }
                } else {
                    gameOverSnake(id, ctx, "AI Crashed! You Win!");
                    return;
                }

                // Head Collision
                if (head.x === state.aiSnake[0].x && head.y === state.aiSnake[0].y) {
                    gameOverSnake(id, ctx, "Head On Collision! Draw!");
                    return;
                }
            }

            drawSnake(id, ctx);
        }

        function checkCollision(head, state) {
            if (head.x < 0 || head.x >= 30 || head.y < 0 || head.y >= 30) return true;
            if (state.snake.some(s => s.x === head.x && s.y === head.y)) return true;
            if (state.aiSnake && state.aiSnake.some(s => s.x === head.x && s.y === head.y)) return true;
            return false;
        }

        function checkCollisionAI(head, state) {
            if (head.x < 0 || head.x >= 30 || head.y < 0 || head.y >= 30) return true;
            if (state.snake.some(s => s.x === head.x && s.y === head.y)) return true;
            if (state.aiSnake.some(s => s.x === head.x && s.y === head.y)) return true;
            return false;
        }

        function getRandomFood(state) {
            let limit = 100;
            while (limit-- > 0) {
                let f = { x: Math.floor(Math.random() * 30), y: Math.floor(Math.random() * 30) };
                let busy = false;
                if (state.snake.some(s => s.x === f.x && s.y === f.y)) busy = true;
                if (state.aiSnake && state.aiSnake.some(s => s.x === f.x && s.y === f.y)) busy = true;
                if (!busy) return f;
            }
            return { x: 15, y: 15 };
        }

        function drawSnake(id, ctx) {
            const state = gameStates[id];
            ctx.fillStyle = '#2d3436';
            ctx.fillRect(0, 0, 300, 300);

            ctx.fillStyle = '#f1c40f'; // Player
            state.snake.forEach(p => ctx.fillRect(p.x * 10, p.y * 10, 9, 9));

            if (state.aiSnake) {
                ctx.fillStyle = '#e74c3c'; // AI
                state.aiSnake.forEach(p => ctx.fillRect(p.x * 10, p.y * 10, 9, 9));
            }

            ctx.fillStyle = '#2ecc71'; // Food
            ctx.fillRect(state.food.x * 10, state.food.y * 10, 9, 9);
        }

        function gameOverSnake(id, ctx, msg) {
            clearInterval(gameStates[id].interval);
            gameStates[id].active = false;
            ctx.fillStyle = 'rgba(0,0,0,0.7)';
            ctx.fillRect(0, 0, 300, 300);
            ctx.fillStyle = 'white';
            ctx.font = '20px Inter';
            ctx.fillText("Game Over", 100, 140);
            ctx.font = '14px Inter';
            ctx.fillText(msg, 110, 160);
        }

        // --- HELPER: Escape HTML ---
        function escapeHtml(text) {
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;");
        }

        // --- HELPER: Syntax Highlighter (for code files only) ---
        function highlightCode(code, fileType) {
            // For text/markdown files, just escape HTML
            if (fileType === 'text') {
                return escapeHtml(code);
            }

            // For code files, apply syntax highlighting
            let html = escapeHtml(code)
                .replace(/(import|from|class|def|return|if|else|elif|for|in|while|try|except|as|pass|lambda|const|let|var|function|async|await)/g, '<span class="token-keyword">$1</span>')
                .replace(/('.*?')/g, '<span class="token-string">$1</span>')
                .replace(/(".*?")/g, '<span class="token-string">$1</span>')
                .replace(/(\/\/.*)/g, '<span class="token-comment">$1</span>')
                .replace(/(#.*)/g, '<span class="token-comment">$1</span>')
                .replace(/\b([A-Z][a-zA-Z0-9_]*)\b/g, '<span class="token-class">$1</span>')
                .replace(/\b([a-z_][a-z0-9_]*)(?=\()/g, '<span class="token-function">$1</span>')
                .replace(/\b(\d+)\b/g, '<span class="token-number">$1</span>');
            return html;
        }

        // Keep old function for backwards compatibility
        function highlightPython(code) {
            return highlightCode(code, 'code');
        }

        // --- HELPER: SysMon Graph ---
        function startSysMonGraph(id) {
            const cpuCanvas = document.getElementById(`cpu-chart-${id}`);
            const memCanvas = document.getElementById(`mem-chart-${id}`);
            const netCanvas = document.getElementById(`net-chart-${id}`);
            if (!cpuCanvas || !memCanvas || !netCanvas) return;

            const cpuCtx = cpuCanvas.getContext('2d');
            const memCtx = memCanvas.getContext('2d');
            const netCtx = netCanvas.getContext('2d');

            // Set resolution
            const resize = (c) => { c.width = c.parentElement.clientWidth; c.height = c.parentElement.clientHeight; };
            resize(cpuCanvas); resize(memCanvas); resize(netCanvas);

            const cpuHistory = new Array(50).fill(0);
            const memHistory = new Array(50).fill(0);
            const netHistory = new Array(50).fill(0);

            // Mock Process Data
            const processes = [
                { name: "neural_engine", cpu: 0, mem: 0 },
                { name: "chrome", cpu: 0, mem: 0 },
                { name: "vscode", cpu: 0, mem: 0 },
                { name: "discord", cpu: 0, mem: 0 },
                { name: "kernel_task", cpu: 0, mem: 0 }
            ];

            const interval = setInterval(() => {
                if (!document.getElementById(`cpu-chart-${id}`)) { clearInterval(interval); return; }

                // --- 1. Update Global Stats ---
                const newCpu = Math.floor(Math.random() * 30) + 5; // 5-35%
                const newMem = 30 + Math.random() * 2; // 30-32%
                const newNet = Math.random() * 50; // Network

                cpuHistory.shift(); cpuHistory.push(newCpu);
                memHistory.shift(); memHistory.push(newMem);
                netHistory.shift(); netHistory.push(newNet);

                // Update DOM Text
                document.getElementById(`cpu-val-${id}`).innerText = newCpu + "%";
                document.getElementById(`mem-val-${id}`).innerText = newMem.toFixed(1) + "%";
                document.getElementById(`mem-abs-${id}`).innerText = (newMem / 100 * 64).toFixed(1) + " / 64 GB";

                document.getElementById(`net-down-${id}`).innerText = (newNet * 15).toFixed(0) + " KB/s";
                document.getElementById(`net-up-${id}`).innerText = (newNet * 2).toFixed(0) + " KB/s";

                // --- 2. Update Process List ---
                const rows = document.getElementById(`proc-rows-${id}`);
                if (rows) {
                    // Randomize process stats slightly
                    processes.forEach(p => {
                        p.cpu = (Math.random() * (newCpu / 3)).toFixed(1);
                        p.mem = (Math.random() * 500).toFixed(0) + 'MB';
                    });
                    processes.sort((a, b) => b.cpu - a.cpu);

                    rows.innerHTML = processes.map(p => `
                        <div class="proc-row">
                            <span class="proc-name">${p.name}</span>
                            <span class="proc-cpu">${p.cpu}%</span>
                            <span class="proc-mem">${p.mem}</span>
                        </div>
                    `).join('');
                }

                // --- 3. Draw Graphs ---
                drawGraph(cpuCtx, cpuHistory, '#2ecc71', cpuCanvas.width, cpuCanvas.height);
                drawGraph(memCtx, memHistory, '#f1c40f', memCanvas.width, memCanvas.height);
                drawGraph(netCtx, netHistory, '#1793d1', netCanvas.width, netCanvas.height);

            }, 500);
        }

        function drawGraph(ctx, data, color, w, h) {
            ctx.clearRect(0, 0, w, h);
            ctx.beginPath();

            // Create Gradient
            const gradient = ctx.createLinearGradient(0, 0, 0, h);
            gradient.addColorStop(0, color);
            gradient.addColorStop(1, "transparent");

            const step = w / (data.length - 1);

            // Draw Line
            ctx.moveTo(0, h - (data[0] / 100 * h));
            for (let i = 1; i < data.length; i++) {
                // Smooth curve (simple bezier or just lines)
                // Using lines for performance & "tech" look
                ctx.lineTo(i * step, h - (data[i] / 100 * h));
            }

            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.stroke();

            // Fill Area
            ctx.lineTo(w, h);
            ctx.lineTo(0, h);
            ctx.closePath();
            ctx.fillStyle = gradient;
            ctx.globalAlpha = 0.3;
            ctx.fill();
            ctx.globalAlpha = 1.0;
        }

        // --- BROWSER LOGIC ---
        function navBrowser(id, url) {
            // Log Navigation
            logActivity("ðŸŒ Browser Nav", `User navigated to: **${url}**`);

            const frame = document.getElementById(`frame-${id}`);
            const urlSpan = document.getElementById(`url-${id}`);

            if (url === 'home') {
                frame.innerHTML = `
                    <div class="browser-home">
                        <div style="text-align:center">
                            <i class="fa-solid fa-earth-americas" style="font-size:60px; color:#1793d1; margin-bottom:20px;"></i>
                            <div class="browser-title" style="font-size:24px; font-weight:bold;">Portfolio Hub</div>
                        </div>
                        <div class="dial-grid">
                            <div class="dial-item" onclick="navBrowser('${id}', 'tools-hub')"><div class="dial-icon">ðŸ› ï¸</div><div class="dial-label">Tools</div></div>
                            <div class="dial-item" onclick="loadGithub('${id}')"><div class="dial-icon" style="color:#fff"><i class="fa-brands fa-github"></i></div><div class="dial-label">GitHub</div></div>
                            <div class="dial-item" onclick="loadInstagram('${id}')"><div class="dial-icon" style="color:#E1306C"><i class="fa-brands fa-instagram"></i></div><div class="dial-label">Instagram</div></div>
                            <div class="dial-item" onclick="loadDiscord('${id}')"><div class="dial-icon" style="color:#5865F2"><i class="fa-brands fa-discord"></i></div><div class="dial-label">Discord Profile</div></div>
                            <div class="dial-item" onclick="navBrowser('${id}', 'contact-me')"><div class="dial-icon" style="color:#2ecc71"><i class="fa-solid fa-envelope"></i></div><div class="dial-label">Contact Me</div></div>
                        </div>
                    </div>`;
                urlSpan.innerText = "New Tab";
            }
            else if (url === 'back') {
                const current = urlSpan.innerText;
                // If in Tools Hub, go Home
                if (current === 'Tools Hub') {
                    navBrowser(id, 'home');
                }
                // If in a Tool Website (Vyapari domain), go back to Tools Hub
                else if (current.includes('vyapari.space')) {
                    navBrowser(id, 'tools-hub');
                }
                // Default fallback to Home
                else {
                    navBrowser(id, 'home');
                }
            }
            else if (url === 'tools-hub') {
                // New Tools Hub UI
                frame.innerHTML = `
                    <div class="tools-hub-container">
                        <div class="tools-header">Select a Toolset</div>
                        <div class="tool-cards">
                            <div class="tool-card" onclick="navBrowser('${id}', 'https://www.vyapari.space/aitools/')">
                                <div class="tool-bg"></div>
                                <div class="tool-icon"><i class="fa-solid fa-wand-magic-sparkles"></i></div>
                                <div class="tool-name">AI Suite</div>
                                <div class="tool-desc">Access advanced AI utilities</div>
                            </div>
                            <div class="tool-card" onclick="navBrowser('${id}', 'https://www.vyapari.space/tools/')">
                                <div class="tool-bg" style="background: linear-gradient(45deg, #e74c3c, #f1c40f);"></div>
                                <div class="tool-icon"><i class="fa-solid fa-toolbox"></i></div>
                                <div class="tool-name">General Utilities</div>
                                <div class="tool-desc">Everyday developer tools</div>
                            </div>
                            <div class="tool-card" onclick="navBrowser('${id}', 'https://www.vyapari.space/coder/')">
                                <div class="tool-bg" style="background: linear-gradient(45deg, #2ecc71, #1793d1);"></div>
                                <div class="tool-icon"><i class="fa-solid fa-laptop-code"></i></div>
                                <div class="tool-name">Coder Space</div>
                                <div class="tool-desc">IDE & Coding Tools</div>
                            </div>
                        </div>
                    </div>
                `;
                urlSpan.innerText = "Tools Hub";
            }
            else if (url === 'contact-me') {
                frame.innerHTML = `
                    <div class="contact-container" style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; color:white;">
                        <div style="font-size:24px; font-weight:bold; margin-bottom:20px; text-shadow: 0 0 10px rgba(46, 204, 113, 0.5);">Contact Me</div>
                        <div style="background:rgba(36, 40, 59, 0.9); padding:30px; border-radius:12px; border:1px solid #414868; width:300px; display:flex; flex-direction:column; gap:15px; backdrop-filter:blur(10px); box-shadow: 0 10px 30px rgba(0,0,0,0.5);">
                            <input type="text" id="contact-name-${id}" placeholder="Your Name" style="background:#1a1b26; border:1px solid #414868; padding:12px; color:white; border-radius:6px; outline:none; font-family:inherit;">
                            <input type="email" id="contact-mail-${id}" placeholder="Your Email (@gmail.com)" style="background:#1a1b26; border:1px solid #414868; padding:12px; color:white; border-radius:6px; outline:none; font-family:inherit;">
                            <textarea id="contact-msg-${id}" placeholder="Message" rows="4" style="background:#1a1b26; border:1px solid #414868; padding:12px; color:white; border-radius:6px; outline:none; resize:none; font-family:inherit;"></textarea>
                            <button onclick="sendContactMsg('${id}')" style="background:linear-gradient(45deg, #2ecc71, #27ae60); color:#fff; border:none; padding:12px; border-radius:6px; cursor:none; font-weight:bold; transition:all 0.2s; text-transform:uppercase; letter-spacing:1px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 5px 15px rgba(46, 204, 113, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">Send Message</button>
                        </div>
                        <div id="contact-status-${id}" style="margin-top:15px; font-size:13px; min-height:20px; font-weight:bold;"></div>
                    </div>
                `;
                urlSpan.innerText = "Contact Form";
            }
            else {
                // View external site with responsive iframe
                frame.innerHTML = `<iframe src="${url}" allow="camera; microphone; fullscreen; display-capture; geolocation" style="width:100%; height:100%; border:none; flex-grow:1;"></iframe>`;
                urlSpan.innerText = url;

                // AUTO-MAXIMIZE for Tools to show "whole" website
                if (url.includes('vyapari.space')) {
                    const win = document.getElementById(id);
                    if (win && !win.classList.contains('maximized')) {
                        toggleMax(id);
                    }
                }
            }
        }

        // --- GITHUB INSPECTOR LOGIC ---
        async function fetchRepoTree(id, repoName) {
            const sidebar = document.getElementById(`tree-${id}`);
            try {
                // Fetch root directory
                const res = await fetch(`https://api.github.com/repos/AnishVyapari/${repoName}/contents`);
                if (!res.ok) throw new Error("Rate Limit or 404");
                const files = await res.json();

                let html = `<div style="padding:10px; font-weight:bold; color:#c9d1d9; border-bottom:1px solid #3b4252">${repoName}</div>`;

                // Sort folders first
                files.sort((a, b) => (a.type === b.type ? 0 : a.type === 'dir' ? -1 : 1));

                files.forEach(f => {
                    let icon = f.type === 'dir' ? 'fa-folder' : 'fa-file';
                    if (f.name.endsWith('.js')) icon = 'fa-brands fa-js';
                    if (f.name.endsWith('.py')) icon = 'fa-brands fa-python';
                    if (f.name.endsWith('.html')) icon = 'fa-brands fa-html5';
                    if (f.name.endsWith('.css')) icon = 'fa-brands fa-css3-alt';

                    html += `<div class="inspector-file" onclick="viewFile('${id}', '${repoName}', '${f.path}')">
                        <i class="fa-solid ${icon}" style="${f.type === 'dir' ? 'color:#1793d1' : ''}"></i> ${f.name}
                    </div>`;
                });

                sidebar.innerHTML = html;
            } catch (e) {
                sidebar.innerHTML = `<div style="padding:10px; color:#e74c3c">Failed to load tree.<br>API Limit likely reached.</div>`;
            }
        }

        async function viewFile(id, repoName, path) {
            logActivity("ðŸ“‚ Inspecting File", `Repo: ${repoName} | File: ${path}`);
            const main = document.getElementById(`code-${id}`);
            main.innerHTML = `<div class="loading-spinner"></div>`;

            try {
                const res = await fetch(`https://api.github.com/repos/AnishVyapari/${repoName}/contents/${path}`);
                if (!res.ok) throw new Error("Error fetching file");
                const data = await res.json();

                // Decode Base64 (handle special chars properly)
                const content = decodeURIComponent(escape(window.atob(data.content)));
                main.innerText = content;
            } catch (e) {
                main.innerHTML = `<div style="color:#e74c3c">Error: Could not read file content.<br>It might be too large or binary.</div>`;
            }
        }

        // --- GITHUB MAIN PROFILE ---
        async function loadGithub(id) {
            const frame = document.getElementById(`frame-${id}`);
            document.getElementById(`url-${id}`).innerText = "github.com/AnishVyapari";

            // Check cache
            const cacheKey = 'neural_gh_cache';
            const cached = localStorage.getItem(cacheKey);
            let data = null;

            if (cached) {
                const parsed = JSON.parse(cached);
                if (Date.now() - parsed.timestamp < 3600000) { // 1 hour cache
                    data = parsed.data;
                }
            }

            if (!data) {
                frame.innerHTML = `<div style="padding:20px; color:white;">Loading GitHub Data...</div>`;
                try {
                    const userRes = await fetch('https://api.github.com/users/AnishVyapari');
                    const user = await userRes.json();
                    const reposRes = await fetch('https://api.github.com/users/AnishVyapari/repos?sort=updated&per_page=100');
                    const repos = await reposRes.json();
                    data = { user, repos };
                    localStorage.setItem(cacheKey, JSON.stringify({ timestamp: Date.now(), data }));
                } catch (e) {
                    frame.innerHTML = `<div style="padding:20px; color:#e74c3c;">Failed to load GitHub data. API limit might be reached.<br>Error: ${e}</div>`;
                    return;
                }
            }

            const { user, repos } = data;
            const repoHtml = repos.map(r => {
                const langColor = { Python: '#3572A5', JavaScript: '#f1e05a', HTML: '#e34c26', CSS: '#563d7c', TypeScript: '#2b7489' }[r.language] || '#ccc';
                return `
                <div class="card">
                    <div class="card-left">
                        <div class="card-title">
                            <i class="fa-solid fa-book-bookmark" style="color:#8b949e;"></i> 
                            <span style="margin-left:5px">${r.name}</span>
                        </div>
                        <div class="card-desc">${r.description || 'No description provided.'}</div>
                        <div class="card-meta">
                            <span><span class="lang-dot" style="background:${langColor}"></span>${r.language || 'Text'}</span>
                            <span><i class="fa-regular fa-star"></i> ${r.stargazers_count}</span>
                            <span><i class="fa-solid fa-code-fork"></i> ${r.forks_count}</span>
                        </div>
                    </div>
                    <div class="card-actions">
                        <a href="${r.html_url}" target="_blank" class="repo-btn"><i class="fa-brands fa-github"></i> GitHub</a>
                        <div class="repo-btn" onclick="createWindow('Code: ${r.name}', 'inspector', '${r.name}')"><i class="fa-solid fa-code"></i> Inspect</div>
                    </div>
                </div>`;
            }).join('');

            frame.innerHTML = `
                <div class="social-feed">
                    <div class="github-layout">
                        <div class="github-sidebar">
                            <img src="${user.avatar_url}" class="profile-img">
                            <div class="profile-name">${user.name}</div>
                            <div class="profile-login">${user.login}</div>
                            <div class="profile-bio">${user.bio || ''}</div>
                            <div class="profile-stats"><i class="fa-solid fa-users"></i> <b>${user.followers}</b> followers Â· <b>${user.following}</b> following</div>
                        </div>
                        <div class="github-main">
                            <div class="repo-grid">${repoHtml}</div>
                        </div>
                    </div>
                </div>`;
        }

        // --- DISCORD FULL PROFILE ---
        async function loadDiscord(id) {
            const frame = document.getElementById(`frame-${id}`);
            document.getElementById(`url-${id}`).innerText = "discord.com/users/" + DISCORD_ID;
            frame.innerHTML = `<div style="padding:20px; color:white;">Connecting to Lanyard...</div>`;

            // Simple Cache
            const cacheKey = 'neural_discord_cache';
            const cached = localStorage.getItem(cacheKey);
            let d = null;

            if (cached) {
                const parsed = JSON.parse(cached);
                if (Date.now() - parsed.timestamp < 300000) { // 5 mins cache
                    d = parsed.data;
                }
            }

            if (!d) {
                try {
                    const res = await fetch(`https://api.lanyard.rest/v1/users/${DISCORD_ID}`);
                    const json = await res.json();
                    d = json.data;
                    localStorage.setItem(cacheKey, JSON.stringify({ timestamp: Date.now(), data: d }));
                } catch (e) {
                    frame.innerHTML = `<div style="padding:20px; color:#e74c3c;">Failed to fetch Discord status.</div>`;
                    return;
                }
            }

            const user = d.discord_user;
            const avatar = `https://cdn.discordapp.com/avatars/${user.id}/${user.avatar}.png?size=256`;
            const banner = user.banner ? `https://cdn.discordapp.com/banners/${user.id}/${user.banner}.png?size=512` : null;
            const decoration = user.avatar_decoration_data ? `https://cdn.discordapp.com/avatar-decoration-presets/${user.avatar_decoration_data.asset}.png` : null;
            const statusColor = { online: '#23a559', idle: '#f0b232', dnd: '#f23f43', offline: '#80848e' }[d.discord_status];
            const bannerStyle = banner ? `background-image: url('${banner}');` : `background-color: ${d.kv?.accent_color || '#18191c'}`;

            frame.innerHTML = `
                <div class="discord-container">
                    <div class="discord-modal">
                        <div class="discord-banner" style="${bannerStyle}"></div>
                        <div class="discord-avatar-wrapper">
                            <img src="${avatar}" class="discord-avatar">
                            ${decoration ? `<img src="${decoration}" class="discord-decoration">` : ''}
                            <div class="discord-status-dot" style="background-color:${statusColor}"></div>
                        </div>
                        <div class="discord-badges">
                            <div class="discord-badge" title="HypeSquad Balance"><i class="fa-solid fa-scale-balanced" style="color:#9b84ee"></i></div>
                            <div class="discord-badge" title="Developer"><i class="fa-solid fa-code" style="color:#fff"></i></div>
                        </div>
                        <div class="discord-body">
                            <div class="discord-username">${user.global_name || user.username}</div>
                            <div class="discord-handle">${user.username}</div>
                            <div class="discord-section">
                                <div class="discord-section-title">About Me</div>
                                <div class="discord-bio">Hello! I'm Anish, a developer exploring Neural Networks and Web Simulations.</div>
                            </div>
                            <div class="discord-section" style="border:none">
                                <div class="discord-section-title">Member Since</div>
                                <div style="font-size:13px; color:#dcddde; margin-bottom:15px">May 23, 2018</div>
                                ${d.activities.length > 0 && d.activities[0].name !== 'Custom Status' ? `
                                <div class="discord-section-title">Activity</div>
                                <div class="discord-activity-card">
                                    <img src="${d.activities[0].assets ? `https://cdn.discordapp.com/app-assets/${d.activities[0].application_id}/${d.activities[0].assets.large_image}.png` : 'https://cdn.discordapp.com/embed/avatars/0.png'}" style="width:60px;height:60px;border-radius:8px">
                                    <div>
                                        <div style="font-weight:bold; font-size:14px; color:#fff">${d.activities[0].name}</div>
                                        <div style="font-size:13px; color:#b9bbbe">${d.activities[0].details || ''}</div>
                                        <div style="font-size:13px; color:#b9bbbe">${d.activities[0].state || ''}</div>
                                    </div>
                                </div>` : ''}
                            </div>
                        </div>
                    </div>
                </div>`;
        }

        async function loadInstagram(id) {
            const frame = document.getElementById(`frame-${id}`);
            document.getElementById(`url-${id}`).innerText = "instagram.com/anish_vyapari";

            const username = 'anish_vyapari';

            frame.innerHTML = `
                <div class="social-feed">
                    <div style="text-align:center; padding:80px 20px;">
                        <i class="fa-brands fa-instagram" style="font-size:100px; color:#E1306C; margin-bottom:30px; filter:drop-shadow(0 0 20px rgba(225, 48, 108, 0.3));"></i>
                        <h3 style="color:#fff; margin-bottom:15px; font-size:22px;">Check out my Instagram</h3>
                        <p style="color:#aaa; margin-bottom:30px; max-width:350px; margin-left:auto; margin-right:auto; line-height:1.6;">
                            Follow for AI projects, coding tutorials, and tech insights
                        </p>
                        <button onclick="window.open('https://www.instagram.com/${username}/', '_blank')" 
                                style="padding:14px 28px; background:linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); border:none; color:white; border-radius:10px; cursor:none; font-weight:bold; font-size:15px; box-shadow:0 4px 15px rgba(225, 48, 108, 0.4); transition:transform 0.2s;"
                                onmouseover="this.style.transform='translateY(-2px)'"
                                onmouseout="this.style.transform='translateY(0)'">
                            <i class="fa-brands fa-instagram"></i> Visit Instagram
                        </button>
                    </div>
                </div>`;
        }

        // --- CONTACT FORM LOGIC ---
        async function sendContactMsg(id) {
            const name = document.getElementById(`contact-name-${id}`).value.trim();
            const mail = document.getElementById(`contact-mail-${id}`).value.trim();
            const msg = document.getElementById(`contact-msg-${id}`).value.trim();
            const status = document.getElementById(`contact-status-${id}`);

            if (!name || !mail || !msg) {
                status.innerHTML = `<span style="color:#e74c3c"><i class="fa-solid fa-circle-exclamation"></i> Please fill all fields.</span>`;
                return;
            }

            if (!mail.endsWith('@gmail.com')) {
                status.innerHTML = `<span style="color:#e74c3c"><i class="fa-solid fa-circle-exclamation"></i> Email must be @gmail.com</span>`;
                return;
            }

            status.innerHTML = `<span style="color:#f1c40f"><i class="fa-solid fa-spinner fa-spin"></i> Sending...</span>`;

            // Webhook URL (Hardcoded as requested)
            const webhookUrl = "__WEBHOOK_WHO_OPENED__";

            try {
                const res = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: "NeuralOS Contact",
                        avatar_url: "https://i.imgur.com/4M34hi2.png", // NeuralOS Logo or similar
                        embeds: [{
                            title: "ðŸ“© New Contact Message",
                            color: 3066993, // Green
                            fields: [
                                { name: "Name", value: name, inline: true },
                                { name: "Email", value: mail, inline: true },
                                { name: "Message", value: msg }
                            ],
                            footer: { text: "Sent via NeuralOS Browser" },
                            timestamp: new Date().toISOString()
                        }]
                    })
                });

                if (res.ok) {
                    status.innerHTML = `<span style="color:#2ecc71"><i class="fa-solid fa-check"></i> Message sent successfully!</span>`;
                    soundEngine.terminalExecute(); // Reuse success sound
                    document.getElementById(`contact-name-${id}`).value = '';
                    document.getElementById(`contact-mail-${id}`).value = '';
                    document.getElementById(`contact-msg-${id}`).value = '';
                } else {
                    throw new Error("Discord API Error");
                }
            } catch (e) {
                status.innerHTML = `<span style="color:#e74c3c"><i class="fa-solid fa-circle-xmark"></i> Failed to send: ${e.message}</span>`;
            }
        }

        // --- TERMINAL HANDLER ---
        function handleTerm(e, input, id) {
            // Play key sound for any key
            if (e.key !== 'Enter') {
                soundEngine.terminalKey();
                return;
            }

            // Play execute sound on Enter
            soundEngine.terminalExecute();

            const cmd = input.value;

            // Log the command
            logActivity("ðŸ’» Terminal Command", `User executed: \`${cmd}\``);

            const out = document.getElementById(`term-out-${id}`);
            const line = document.createElement('div');
            line.className = 'term-line';
            line.innerHTML = `<span class="prompt-user">root@neural-vm</span>:~$ ${cmd}`;
            out.appendChild(line);

            const lower = cmd.toLowerCase().trim();
            const print = (t, c = '#dcdcdc') => { const d = document.createElement('div'); d.className = 'term-line'; d.style.color = c; d.innerHTML = t; out.appendChild(d); }

            let isError = false;
            if (lower === 'help') {
                print("ðŸ“– Available Commands:", "#fff");
                print("  ls, clear, reboot       - Basic commands", "#2ecc71");
                print("  whoami, skills, contact - About me", "#1793d1");
                print("  github, discord, tools  - My socials & tools", "#5865F2");
                print("  quote, fortune, coffee  - Fun stuff â˜•", "#f1c40f");
                print("  neofetch, uptime, time  - System info", "#9b59b6");
                print("  matrix, secret, hack    - Easter eggs ðŸ¥š", "#e74c3c");
            }
            else if (lower === 'ls') print("neural_network.py  README.md  todo.txt  future_goals.md  quotes.json", "#f1c40f");
            else if (lower === 'quote') {
                const quotes = [
                    '"The only way to do great work is to love what you do." - Steve Jobs',
                    '"Code is like humor. When you have to explain it, its bad." - Cory House',
                    '"First, solve the problem. Then, write the code." - John Johnson',
                    '"The best error message is the one that never shows up." - Thomas Fuchs',
                    '"In order to be irreplaceable, one must always be different." - Coco Chanel',
                    '"Any fool can write code that a computer can understand. Good programmers write code that humans can understand." - Martin Fowler',
                    '"The function of good software is to make the complex appear to be simple." - Grady Booch'
                ];
                print(quotes[Math.floor(Math.random() * quotes.length)], "#9b59b6");
            }
            else if (lower === 'github') { print("Opening GitHub...", "#1793d1"); createWindow('Browser', 'browser'); setTimeout(() => loadGithub(windows[windows.length - 1].id), 500); }
            else if (lower === 'discord') { print("Opening Discord...", "#5865F2"); createWindow('Browser', 'browser'); setTimeout(() => loadDiscord(windows[windows.length - 1].id), 500); }
            else if (lower === 'tools') { print("Opening Tools Hub...", "#e74c3c"); createWindow('Browser', 'browser'); setTimeout(() => navBrowser(windows[windows.length - 1].id, 'tools-hub'), 500); }
            else if (lower === 'ai') { print("Launching AI Suite...", "#9b59b6"); createWindow('Browser', 'browser'); setTimeout(() => navBrowser(windows[windows.length - 1].id, 'https://www.vyapari.space/aitools/'), 500); }
            else if (lower === 'coder') { print("Launching Coder Space...", "#2ecc71"); createWindow('Browser', 'browser'); setTimeout(() => navBrowser(windows[windows.length - 1].id, 'https://www.vyapari.space/coder/'), 500); }
            else if (lower === 'utils') { print("Launching Utilities...", "#f1c40f"); createWindow('Browser', 'browser'); setTimeout(() => navBrowser(windows[windows.length - 1].id, 'https://www.vyapari.space/tools/'), 500); }
            else if (lower === 'calc') { print("Calc not installed. Use 'utils' for full utilities.", "#e74c3c"); isError = true; }
            else if (lower === 'clear') out.innerHTML = '';
            else if (lower === 'reboot') location.reload();
            else if (lower === 'play' || lower === 'game') {
                print("Starting Neural Arena...", "#2ecc71");
                runVSCode(null);
            }
            else if (lower === 'whoami') {
                const startYear = 2025;
                const gradYear = 2028;
                const currYear = new Date().getFullYear();
                let status = "";

                if (currYear < startYear) status = "Future BTech Student @ RAIT";
                else if (currYear > gradYear) status = "Graduated: BTech CSE (AI & ML) @ RAIT";
                else {
                    const yearNum = currYear - startYear + 1;
                    const suffix = (yearNum === 1) ? 'st' : (yearNum === 2) ? 'nd' : (yearNum === 3) ? 'rd' : 'th';
                    status = `${yearNum}${suffix} Year BTech CSE (AI & ML) Student @ RAIT`;
                }

                print("ðŸ¤– AI/ML Engineer | ðŸ¤– Discord Bot Developer", "#eceff4");
                print("ðŸš€ Full-Stack Developer | ðŸ’¡ Building intelligent solutions", "#eceff4");
                print(status, "#2ecc71");
                print("Python | JavaScript | C++", "#a0a0a0");
            }
            // Easter egg commands - fun stuff!
            else if (lower === 'coffee' || lower === 'brew') {
                print("â˜• Brewing...", "#f1c40f");
                setTimeout(() => {
                    print("   ( (", "#8b4513");
                    print("    ) )", "#8b4513");
                    print("  ........", "#dcdcdc");
                    print("  |      |]", "#dcdcdc");
                    print("  \\      /", "#dcdcdc");
                    print("   `----'", "#dcdcdc");
                    print("", "");
                    print("Here's your coffee! Now code like there's no tomorrow.", "#2ecc71");
                }, 500);
            }
            else if (lower === 'time' || lower === 'date') {
                const now = new Date();
                print("ðŸ• " + now.toLocaleString(), "#1793d1");
            }
            else if (lower === 'uptime') {
                const uptime = Math.floor(performance.now() / 1000);
                const mins = Math.floor(uptime / 60);
                const secs = uptime % 60;
                print(`â±ï¸ System uptime: ${mins}m ${secs}s`, "#2ecc71");
            }
            else if (lower === 'neofetch' || lower === 'sysinfo') {
                print("", "");
                print("  â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿  <span style='color:#fff'>anish</span>@<span style='color:#1793d1'>neural-os</span>", "#1793d1");
                print("  â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿â£¿  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€", "#1793d1");
                print("  â£¿â£¿â£¿â£¿â£¿â£¿â£¿â¡â£¿â£¿  <span style='color:#1793d1'>OS:</span> NeuralOS v4.6", "#dcdcdc");
                print("  â£¿â£¿â£¿â£¿â£¿â£¿â¡â €â£¿â£¿  <span style='color:#1793d1'>Host:</span> Web Browser", "#dcdcdc");
                print("  â£¿â£¿â£¿â£¿â£¿â¡â €â €â£¿â£¿  <span style='color:#1793d1'>Kernel:</span> JavaScript ES2024", "#dcdcdc");
                print("  â£¿â£¿â£¿â£¿â¡â €â €â €â£¿â£¿  <span style='color:#1793d1'>Shell:</span> NeuralTerm 1.0", "#dcdcdc");
                print("  â£¿â£¿â£¿â¡â €â €â €â €â£¿â£¿  <span style='color:#1793d1'>Theme:</span> Nord Dark", "#dcdcdc");
                print("  â£¿â£¿â¡¿â â €â €â €â €â¢¿â£¿  <span style='color:#1793d1'>Dev:</span> Anish Vyapari", "#dcdcdc");
                print("", "");
            }
            else if (lower === 'fortune') {
                const fortunes = [
                    "ðŸ”® A bug in your code will reveal itself at the worst possible time.",
                    "ðŸ”® Your next project will be your best one yet.",
                    "ðŸ”® Stack Overflow will have the answer you seek.",
                    "ðŸ”® The semicolon you're missing is on line 42.",
                    "ðŸ”® An unexpected git merge is in your future.",
                    "ðŸ”® Coffee will solve your current problem.",
                    "ðŸ”® Your code will compile on the first try today. Just kidding."
                ];
                print(fortunes[Math.floor(Math.random() * fortunes.length)], "#9b59b6");
            }
            else if (lower === 'skills') {
                print("ðŸ“Š Skills Matrix:", "#fff");
                print("Python     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 95%", "#3572A5");
                print("JavaScript â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 90%", "#f1e05a");
                print("React      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 80%", "#61dafb");
                print("AI/ML      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘ 88%", "#ff6f00");
                print("Node.js    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 78%", "#68a063");
                print("C++        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 70%", "#00599C");
            }
            else if (lower === 'contact') {
                print("ðŸ“¬ Get in touch:", "#fff");
                print("   GitHub:    github.com/AnishVyapari", "#1793d1");
                print("   Discord:   anish_vyapari", "#5865F2");
                print("   Instagram: @anish_vyapari", "#E1306C");
            }
            else if (lower === 'secret' || lower === 'konami') {
                print("ðŸŽ® You found a secret!", "#f1c40f");
                print("", "");
                print("Thanks for exploring NeuralOS!", "#2ecc71");
                print("Built with love by Anish Vyapari", "#1793d1");
                print("", "");
                print("Fun fact: This entire OS runs in your browser!", "#9b59b6");
                soundEngine.success();
            }
            else if (lower === 'matrix') {
                print("Entering the Matrix...", "#2ecc71");
                for (let i = 0; i < 5; i++) {
                    let matrixLine = '';
                    for (let j = 0; j < 40; j++) {
                        matrixLine += String.fromCharCode(0x30A0 + Math.random() * 96);
                    }
                    setTimeout(() => print(matrixLine, "#2ecc71"), i * 100);
                }
            }
            else if (lower === 'hack') {
                print("ðŸ”“ Initiating hack sequence...", "#e74c3c");
                print("Just kidding! That's not what we do here. ðŸ˜„", "#2ecc71");
                print("Try 'help' for actual commands.", "#a0a0a0");
            }
            else { print("Command not found: " + lower + " (try 'help')", "#e74c3c"); isError = true; }

            // Play error sound for invalid commands
            if (isError) soundEngine.terminalError();

            input.value = '';
            out.scrollTop = out.scrollHeight;
        }

        // ==========================================
        // GAME SYSTEM - Run games from VS Code
        // ==========================================

        let currentGame = null;
        let currentFileName = 'neural_network.py';

        function runVSCode(windowId) {
            soundEngine.click();
            const tabTitle = document.getElementById(`vscode-tab-title-${windowId}`);
            const fileName = tabTitle ? tabTitle.innerText : 'neural_network.py';
            currentFileName = fileName;

            const file = fileSystem[fileName];
            if (file && file.type === 'game') {
                launchGame(file.gameType, windowId);
            } else {
                // Show "running" output for non-game files
                showNotification("Running Code", `Executing ${fileName}...`, 3000);
                setTimeout(() => {
                    showNotification("Output", "âœ… Code executed successfully!", 3000);
                    soundEngine.success();
                }, 1000);
            }
        }

        function launchGame(gameType, windowId) {
            soundEngine.windowOpen();
            const container = document.getElementById(`content-${windowId}`);

            if (gameType === 'snake') {
                container.innerHTML = createSnakeGame(windowId);
                initSnakeGame(windowId);
            } else if (gameType === 'memory') {
                container.innerHTML = createMemoryGame(windowId);
                initMemoryGame(windowId);
            } else if (gameType === 'tictactoe') {
                container.innerHTML = createTicTacToe(windowId);
            } else if (gameType === 'clicker') {
                container.innerHTML = createClickerGame(windowId);
            }
        }

        // ðŸ SNAKE GAME
        function createSnakeGame(id) {
            return `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; background:#0a0a12;">
                <h2 style="color:#2ecc71; margin-bottom:10px;">ðŸ Snake Game</h2>
                <p style="color:#888; margin-bottom:10px;">Use Arrow Keys to move</p>
                <canvas id="snake-canvas-${id}" width="300" height="300" style="border:2px solid #2ecc71; border-radius:8px;"></canvas>
                <p style="color:#2ecc71; margin-top:10px;">Score: <span id="snake-score-${id}">0</span></p>
                <button onclick="initSnakeGame('${id}')" style="margin-top:10px; padding:8px 20px; background:#2ecc71; border:none; color:#fff; border-radius:4px; cursor:pointer;">Restart</button>
            </div>`;
        }

        function initSnakeGame(id) {
            const canvas = document.getElementById(`snake-canvas-${id}`);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const size = 15;
            let snake = [{ x: 10, y: 10 }];
            let food = { x: 15, y: 15 };
            let dir = { x: 1, y: 0 };
            let score = 0;
            let gameOver = false;

            function draw() {
                ctx.fillStyle = '#0a0a12';
                ctx.fillRect(0, 0, 300, 300);

                // Draw food
                ctx.fillStyle = '#e74c3c';
                ctx.fillRect(food.x * size, food.y * size, size - 1, size - 1);

                // Draw snake
                snake.forEach((s, i) => {
                    ctx.fillStyle = i === 0 ? '#2ecc71' : '#27ae60';
                    ctx.fillRect(s.x * size, s.y * size, size - 1, size - 1);
                });

                if (gameOver) {
                    ctx.fillStyle = '#e74c3c';
                    ctx.font = '20px monospace';
                    ctx.fillText('GAME OVER!', 90, 150);
                }
            }

            function update() {
                if (gameOver) return;

                const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };

                // Wall collision
                if (head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
                    gameOver = true;
                    soundEngine.terminalError();
                    return;
                }

                // Self collision
                if (snake.some(s => s.x === head.x && s.y === head.y)) {
                    gameOver = true;
                    soundEngine.terminalError();
                    return;
                }

                snake.unshift(head);

                // Eat food
                if (head.x === food.x && head.y === food.y) {
                    score++;
                    document.getElementById(`snake-score-${id}`).innerText = score;
                    soundEngine.success();
                    food = { x: Math.floor(Math.random() * 20), y: Math.floor(Math.random() * 20) };
                } else {
                    snake.pop();
                }
            }

            function gameLoop() {
                update();
                draw();
                if (!gameOver) setTimeout(gameLoop, 100);
            }

            function handleKey(e) {
                if (e.key === 'ArrowUp' && dir.y !== 1) dir = { x: 0, y: -1 };
                if (e.key === 'ArrowDown' && dir.y !== -1) dir = { x: 0, y: 1 };
                if (e.key === 'ArrowLeft' && dir.x !== 1) dir = { x: -1, y: 0 };
                if (e.key === 'ArrowRight' && dir.x !== -1) dir = { x: 1, y: 0 };
            }

            document.addEventListener('keydown', handleKey);
            gameLoop();
        }

        // ðŸ§  MEMORY GAME
        function createMemoryGame(id) {
            return `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; background:#0a0a12; padding:20px;">
                <h2 style="color:#9b59b6; margin-bottom:10px;">ðŸ§  Memory Match</h2>
                <p style="color:#888; margin-bottom:15px;">Match all the pairs!</p>
                <div id="memory-board-${id}" style="display:grid; grid-template-columns:repeat(4,60px); gap:8px;"></div>
                <p style="color:#9b59b6; margin-top:15px;">Moves: <span id="memory-moves-${id}">0</span></p>
            </div>`;
        }

        function initMemoryGame(id) {
            const emojis = ['ðŸŽ®', 'ðŸŽ²', 'ðŸŽ¯', 'ðŸ†', 'â­', 'ðŸš€', 'ðŸ’Ž', 'ðŸ”¥'];
            let cards = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
            let flipped = [];
            let matched = [];
            let moves = 0;

            const board = document.getElementById(`memory-board-${id}`);
            if (!board) return;

            board.innerHTML = cards.map((_, i) =>
                `<div class="memory-card" data-idx="${i}" onclick="flipCard(this, ${i}, '${id}')" style="width:60px; height:60px; background:#1e1e2e; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:24px; cursor:pointer; border:2px solid #333;">?</div>`
            ).join('');

            window[`memoryState_${id}`] = { cards, flipped, matched, moves };
        }

        function flipCard(el, idx, id) {
            const state = window[`memoryState_${id}`];
            if (!state || state.flipped.length >= 2 || state.flipped.includes(idx) || state.matched.includes(idx)) return;

            soundEngine.click();
            el.innerText = state.cards[idx];
            el.style.background = '#2d2d44';
            state.flipped.push(idx);

            if (state.flipped.length === 2) {
                state.moves++;
                document.getElementById(`memory-moves-${id}`).innerText = state.moves;

                const [a, b] = state.flipped;
                if (state.cards[a] === state.cards[b]) {
                    state.matched.push(a, b);
                    state.flipped = [];
                    soundEngine.success();

                    if (state.matched.length === state.cards.length) {
                        setTimeout(() => showNotification("ðŸŽ‰ You Won!", `Completed in ${state.moves} moves!`, 5000), 500);
                    }
                } else {
                    setTimeout(() => {
                        document.querySelectorAll(`#memory-board-${id} .memory-card`).forEach((c, i) => {
                            if (state.flipped.includes(i)) {
                                c.innerText = '?';
                                c.style.background = '#1e1e2e';
                            }
                        });
                        state.flipped = [];
                    }, 800);
                }
            }
        }

        // âŒâ­• TIC TAC TOE
        function createTicTacToe(id) {
            return `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; background:#0a0a12;">
                <h2 style="color:#3498db; margin-bottom:10px;">âŒâ­• Tic Tac Toe</h2>
                <p style="color:#888; margin-bottom:15px;">You are X - Beat the computer!</p>
                <div id="ttt-board-${id}" style="display:grid; grid-template-columns:repeat(3,80px); gap:5px;"></div>
                <p id="ttt-status-${id}" style="color:#3498db; margin-top:15px;">Your turn!</p>
                <button onclick="resetTTT('${id}')" style="margin-top:10px; padding:8px 20px; background:#3498db; border:none; color:#fff; border-radius:4px; cursor:pointer;">New Game</button>
            </div>`;
            setTimeout(() => resetTTT(id), 100);
        }

        function resetTTT(id) {
            const board = document.getElementById(`ttt-board-${id}`);
            if (!board) return;
            window[`tttBoard_${id}`] = Array(9).fill('');
            window[`tttGameOver_${id}`] = false;
            board.innerHTML = Array(9).fill(0).map((_, i) =>
                `<div onclick="tttMove(${i}, '${id}')" style="width:80px; height:80px; background:#1e1e2e; border-radius:8px; display:flex; align-items:center; justify-content:center; font-size:36px; cursor:pointer; color:#fff;"></div>`
            ).join('');
            document.getElementById(`ttt-status-${id}`).innerText = 'Your turn!';
        }

        function tttMove(idx, id) {
            const b = window[`tttBoard_${id}`];
            if (!b || b[idx] || window[`tttGameOver_${id}`]) return;

            soundEngine.click();
            b[idx] = 'X';
            updateTTTBoard(id);

            if (checkTTTWin(b, 'X')) { endTTT(id, 'You win! ðŸŽ‰'); return; }
            if (b.every(c => c)) { endTTT(id, 'Draw!'); return; }

            // Computer move
            setTimeout(() => {
                const empty = b.map((c, i) => c ? -1 : i).filter(i => i >= 0);
                if (empty.length) {
                    b[empty[Math.floor(Math.random() * empty.length)]] = 'O';
                    updateTTTBoard(id);
                    if (checkTTTWin(b, 'O')) endTTT(id, 'Computer wins!');
                }
            }, 300);
        }

        function updateTTTBoard(id) {
            const b = window[`tttBoard_${id}`];
            const board = document.getElementById(`ttt-board-${id}`);
            if (!board) return;
            Array.from(board.children).forEach((cell, i) => {
                cell.innerText = b[i];
                cell.style.color = b[i] === 'X' ? '#3498db' : '#e74c3c';
            });
        }

        function checkTTTWin(b, p) {
            const wins = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
            return wins.some(([a, c, d]) => b[a] === p && b[c] === p && b[d] === p);
        }

        function endTTT(id, msg) {
            window[`tttGameOver_${id}`] = true;
            document.getElementById(`ttt-status-${id}`).innerText = msg;
            soundEngine.success();
        }

        // ðŸ–±ï¸ CLICKER GAME
        function createClickerGame(id) {
            window[`clickerClicks_${id}`] = 0;
            window[`clickerTime_${id}`] = 10;
            window[`clickerActive_${id}`] = false;

            return `<div style="display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; background:#0a0a12;">
                <h2 style="color:#f1c40f; margin-bottom:10px;">ðŸ–±ï¸ Click Challenge</h2>
                <p style="color:#888; margin-bottom:15px;">Click as fast as you can!</p>
                <p style="color:#f1c40f; font-size:48px;" id="clicker-time-${id}">10</p>
                <button id="clicker-btn-${id}" onclick="clickerClick('${id}')" style="width:150px; height:150px; border-radius:50%; background:linear-gradient(135deg, #f1c40f, #e67e22); border:none; font-size:48px; cursor:pointer; box-shadow:0 10px 30px rgba(241,196,15,0.3); transition:transform 0.1s;">ðŸ‘†</button>
                <p style="color:#f1c40f; margin-top:15px; font-size:24px;">Clicks: <span id="clicker-count-${id}">0</span></p>
            </div>`;
        }

        function clickerClick(id) {
            if (!window[`clickerActive_${id}`]) {
                window[`clickerActive_${id}`] = true;
                window[`clickerClicks_${id}`] = 0;
                window[`clickerTime_${id}`] = 10;

                const interval = setInterval(() => {
                    window[`clickerTime_${id}`]--;
                    document.getElementById(`clicker-time-${id}`).innerText = window[`clickerTime_${id}`];

                    if (window[`clickerTime_${id}`] <= 0) {
                        clearInterval(interval);
                        window[`clickerActive_${id}`] = false;
                        soundEngine.success();
                        showNotification("ðŸŽ‰ Time's Up!", `You clicked ${window[`clickerClicks_${id}`]} times!`, 5000);
                    }
                }, 1000);
            }

            if (window[`clickerActive_${id}`] && window[`clickerTime_${id}`] > 0) {
                window[`clickerClicks_${id}`]++;
                document.getElementById(`clicker-count-${id}`).innerText = window[`clickerClicks_${id}`];
                document.getElementById(`clicker-btn-${id}`).style.transform = 'scale(0.95)';
                setTimeout(() => document.getElementById(`clicker-btn-${id}`).style.transform = 'scale(1)', 50);
                soundEngine.click();
            }
        }
    </script>
</body>

</html>